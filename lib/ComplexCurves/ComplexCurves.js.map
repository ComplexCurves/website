{"version":3,"sources":["build/resources.js","src/js/PolynomialParser.js","src/js/Polynomial.js","src/js/Parser.js","src/js/ComplexCurves.js","src/js/State3D.js","src/js/StateGL.js","src/js/API.js","src/js/Assembly.js","src/js/CachedSurface.js","src/js/Complex.js","src/js/Export.js","src/js/GLSL.js","src/js/Matrix.js","src/js/Initial.js","src/js/Mesh.js","src/js/Misc.js","src/js/Monomial.js","src/js/Term.js","src/js/Quaternion.js","src/js/Subdivision.js","src/js/SubdivisionPre.js","src/js/Surface.js","src/js/TransformFeedback.js","src/js/Tokenizer.js"],"names":["resources","PolynomialParser","eval","PolynomialParser.eval","tree","type","value","first","second","Polynomial.add","neg","Polynomial.mul","isConstant","s","constant","re","im","Polynomial.pow","console","error","Polynomial","Term","Complex.real","parseFloat","x","Monomial","m","Complex.one","z","Complex","isBivariate","PolynomialParser.isBivariate","p","variableList","length","parse","PolynomialParser.parse","str","infixCombine","f","fs","infixCombine_","acc","v","reduce","expr","input","e","and","or","prefix","sign","term","many","t","factor","times","b","between","number","imaginary","variable","power","pow","q","tokens","tokenize","literal","symb","plus","minus","polynomial","eoi","sheets","PolynomialParser.sheets","defaultLat","Math","PI","defaultLon","ComplexCurves","canvas","lat","lon","ortho","contextType","Quaternion.fromLatLong","st","State3D","rotation","target0","target1","state3d","stategl","StateGL","registerEventHandlers","ComplexCurvesFromPolynomial","depth","complexCurves","gl","renderer","Surface","renderSurface","ComplexCurves$$module$src$js$ComplexCurves.prototype","ComplexCurves.prototype","ComplexCurves$$module$src$js$ComplexCurves_prototype$domainColouring","ComplexCurves.prototype.domainColouring","big","domainColouring","ComplexCurves$$module$src$js$ComplexCurves_prototype$exportBinary","ComplexCurves.prototype.exportBinary","name","exportBinary","ComplexCurves$$module$src$js$ComplexCurves_prototype$exportDomainColouring","ComplexCurves.prototype.exportDomainColouring","exportDomainColouring","exportScreenshot","ComplexCurves.prototype.exportScreenshot","withRenderToTexture","pixels","readTexture","rttBigTexture","rttTexture","Export.download","Export.pixelsToImageDataURL","ComplexCurves$$module$src$js$ComplexCurves_prototype$exportSurface","ComplexCurves.prototype.exportSurface","exportSurface","ComplexCurves.prototype.registerEventHandlers","mousedownHandler","this.mousedownHandler","evt","preventDefault","autorotate","mouseDown","clientX","clientY","mousemoveHandler","this.mousemoveHandler","mouseMove","mouseupHandler","this.mouseupHandler","mouseCoord","rotating","touchstartHandler","this.touchstartHandler","touch","touches","touchmoveHandler","this.touchmoveHandler","touchendHandler","this.touchendHandler","wheelHandler","this.wheelHandler","zoomFactor","deltaY","min","max","addEventListener","ComplexCurves.prototype.renderSurface","Quaternion.sub","abs","updateRotation","requestAnimationFrame","rotateBack","ComplexCurves.prototype.rotateBack","rotateLatLong","rotateBottom","ComplexCurves.prototype.rotateBottom","rotateDefault","ComplexCurves.prototype.rotateDefault","rotateFront","ComplexCurves.prototype.rotateFront","ComplexCurves.prototype.rotateLatLong","rotateLeft","ComplexCurves.prototype.rotateLeft","rotateRight","ComplexCurves.prototype.rotateRight","rotateTop","ComplexCurves.prototype.rotateTop","ComplexCurves$$module$src$js$ComplexCurves_prototype$setAntialiasing","ComplexCurves.prototype.setAntialiasing","fxaa","ComplexCurves$$module$src$js$ComplexCurves_prototype$setAutorotate","ComplexCurves.prototype.setAutorotate","setBackground","ComplexCurves.prototype.setBackground","r","g","a","clearColor","ComplexCurves$$module$src$js$ComplexCurves_prototype$setClipping","ComplexCurves.prototype.setClipping","clipping","setLatLong","ComplexCurves.prototype.setLatLong","ComplexCurves$$module$src$js$ComplexCurves_prototype$setOrtho","ComplexCurves.prototype.setOrtho","ComplexCurves$$module$src$js$ComplexCurves_prototype$setTransparency","ComplexCurves.prototype.setTransparency","transparency","setZoom","ComplexCurves.prototype.setZoom","zoomLevel","ComplexCurves$$module$src$js$ComplexCurves_prototype$toggleAntialiasing","ComplexCurves.prototype.toggleAntialiasing","ComplexCurves$$module$src$js$ComplexCurves_prototype$toggleAutorotate","ComplexCurves.prototype.toggleAutorotate","ComplexCurves$$module$src$js$ComplexCurves_prototype$toggleClipping","ComplexCurves.prototype.toggleClipping","ComplexCurves$$module$src$js$ComplexCurves_prototype$toggleOrtho","ComplexCurves.prototype.toggleOrtho","ComplexCurves$$module$src$js$ComplexCurves_prototype$toggleTransparency","ComplexCurves.prototype.toggleTransparency","unregisterEventHandlers","ComplexCurves.prototype.unregisterEventHandlers","removeEventListener","window","ComplexCurvesFromEquation","equation","ComplexCurvesFromFile","file","onload","CachedSurface","prototype","setAntialiasing","setAutorotate","setClipping","setOrtho","setTransparency","toggleAntialiasing","toggleAutorotate","toggleClipping","toggleOrtho","toggleTransparency","Assembly","surface","sources","StateGL.getShaderSource","withCustomAndCommon","mkProgram","program","render","Assembly.prototype.render","textures","useProgram","numIndices","uniform1f","getUniformLocation","numIndicesLoc","fillIndexBuffer","vertexAttribPointer","FLOAT","size","stride","texIs","i","l","activeTexture","TEXTURE0","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_MAG_FILTER","NEAREST","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","uniform1iv","samplersLocation","disable","DEPTH_TEST","sheetLoc","TransformFeedback.withTransformFeedback","sheet","drawArrays","TRIANGLES","enable","cachedSurface","loadModel","positions","byteLength","enableVertexAttribArray","positionsBuffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STATIC_DRAW","StateGL.getShaderSources","CachedSurface.prototype","CachedSurface_prototype$domainColouring","CachedSurface.prototype.domainColouring","Export.domainColouring","CachedSurface_prototype$exportBinary","CachedSurface.prototype.exportBinary","CachedSurface_prototype$exportDomainColouring","CachedSurface.prototype.exportDomainColouring","Export.exportDomainColouring","CachedSurface_prototype$exportSurface","CachedSurface.prototype.exportSurface","Export.exportSurface","CachedSurface_prototype$file","CachedSurface.prototype.loadModel","req","XMLHttpRequest","open","responseType","req.onload","response","send","CachedSurface_prototype$polynomial","CachedSurface_prototype$program","CachedSurface.prototype.render","updateClipping","updateUniformMatrix","rotationMatrix","updateViewMatrix","updateProjectionMatrix","updateTransparency","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","CachedSurface_prototype$size","Complex.prototype.abs","sqrt","abs2","Complex.add","add","Complex.prototype.add","Complex.div","Complex.infinity","Infinity","Complex.mul","Complex.prototype.neg","Complex.sqrt","Complex.zero","Complex.sub","renderSheet","rttArrayBuffer","loc","uniform1i","customShaderSrc","GLSL.polynomialShaderSource","commonShaderSrc","join","vars","numSheets","degree","vy","bind","texture","url","link","document","createElement","href","download","style","display","body","appendChild","click","removeChild","maxValue","minValue","BYTES_PER_ELEMENT","vertices","y","w","push","d","uvs","u","faces","j","k","indices","map","v1","uv1","findIndex","v2","uv2","indices2","Array","from","Set","ii","vertexStrings","uvStrings","uv","faceStrings","obj","concat","encodeURIComponent","texels","mtl","width","height","context","getContext","imageData","createImageData","data","set","putImageData","canvasFlip","contextFlip","translate","scale","drawImage","toDataURL","GLSL.glslCoefficients","cs","GLSL.glslComplex","cs_","coefficientList_","vx","coefficientList","GLSL.glslHorner","toPrecision","GLSL.glslF","reverse","n","GLSL.N","zero","lines","GLSL.glslFx","diff","GLSL.glslFy","GLSL.glslM","terms","coefficient","monomial","leading","an","leadRoots","Polynomial.roots","a0a0","GLSL.glslRho","syl","Polynomial.sylvester","as","values","xs","ms","sum","Matrix","bs","rows","cols","mul","discRoots","disc","critical","isFinite","Initial","Mesh.tetrakis","mkBuffers","positionBuffer","Initial.prototype.render","TransformFeedback.toTextures","mesh","Misc.lerp","mu","Monomial.clone","key","var_args","args","arguments","result","results","parser","unshift","apply","middle","left","right","shift","op","op1","Term.reduce","Polynomial.prototype","Polynomial.prototype.add","Polynomial.prototype.coefficient","ps","Polynomial.prototype.coefficientList","Polynomial.prototype.coefficientList_","Polynomial.prototype.constant","c","Object","keys","Polynomial.prototype.degree","Polynomial.prototype.diff","Polynomial.prototype.isConstant","Polynomial.laguerre","maxiter","rand","g2","iter","tol","h","d1","d2","cos","sin","floor","qs","oa","ob","Polynomial.prototype.neg","ts","res","Number","isInteger","Polynomial.prototype.pow","Polynomial.quadratic_roots","roots","cs_orig","slice","fx","x0","qroots","Polynomial.prototype.sheets","sub","Polynomial.prototype.sub","zeros","zs","Polynomial.zero","p_","q_","Polynomial.prototype.variableList","hasVar","sort","Polynomial_prototype$zero","Quaternion","Quaternion.prototype.abs","long","theta","phi","Quaternion.mul","Quaternion.lerp","Quaternion.prototype.normalize","Quaternion.prototype.rotationMatrix","State3D.prototype","State3D_prototype$rotation","State3D.prototype.mouseDown","xy","State3D.prototype.mouseMove","dx","xo","dy","yo","dr","sint","normalize","q2","State3D.prototype.updateRotation","preserveDrawingBuffer","alert","Error","mkFXAAProgram","fxaaProgram","mkRenderToTextureObjects","bigTextureSize","getParameter","MAX_TEXTURE_SIZE","rttBigFramebuffer","createFramebuffer","bindFramebuffer","FRAMEBUFFER","rttBigRenderbuffer","createRenderbuffer","bindRenderbuffer","RENDERBUFFER","renderbufferStorage","DEPTH_COMPONENT16","framebufferRenderbuffer","DEPTH_ATTACHMENT","createTexture","texImage2D","RGBA","UNSIGNED_BYTE","framebufferTexture2D","COLOR_ATTACHMENT0","rttFramebuffer","rttRenderbuffer","StateGL.prototype","shader","trim","shaderId","StateGL.prototype.mkProgram","transformFeedbackVaryings","fragmentShaderSource","vertexShader","createShader","VERTEX_SHADER","shaderSource","vertexShaderSource","compileShader","getShaderParameter","COMPILE_STATUS","log","getShaderInfoLog","shaderProgram","createProgram","attachShader","fragmentShader","FRAGMENT_SHADER","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","StateGL.prototype.readTexture","framebuffer","FRAMEBUFFER_BINDING","readBuffer","checkFramebufferStatus","complete","FRAMEBUFFER_COMPLETE","deleteFramebuffer","Uint8Array","readPixels","err","getError","NO_ERROR","StateGL.prototype.renderSurface","withOptionalFXAA","StateGL.prototype.updateClipping","CURRENT_PROGRAM","StateGL.prototype.updateProjectionMatrix","vp","VIEWPORT","bottom","zoom","top","s1","s2","tan","aspect","StateGL.prototype.updateTransparency","blendFunc","SRC_ALPHA","ONE","BLEND","depthFunc","LESS","StateGL.prototype.updateUniformMatrix","uniformMatrix4fv","StateGL.prototype.updateViewMatrix","StateGL.prototype.withOptionalFXAA","action","withFXAA","StateGL.prototype.withRenderToTexture","viewport","Subdivision","Subdivision.prototype.render","subdivisionFlags","buf","TransformFeedback.toFloat32Array","subdivisionPattern","subdivisionPatternFirst","subdivisionPatternCount","offsetsIn","patterns","primitivesWritten","patternIndex","pattern","patternsBuffer","offsetsInBuffer","deleteBuffer","disableVertexAttribArray","SubdivisionPre","SubdivisionPre.prototype.render","indexBuffer","mkTextures","mkTransformFeedback","transformFeedback","transformFeedbackBuffer","initial","subdivisionPre","subdivision","assembly","Surface.prototype","Surface.prototype.domainColouring","Surface.prototype.exportBinary","URL","createObjectURL","Blob","Surface.prototype.exportDomainColouring","Surface.prototype.exportSurface","Surface.prototype.fillIndexBuffer","Surface_prototype$indexBuffer","Surface_prototype$program","Surface.prototype.render","Surface_prototype$sheets","Surface.prototype.withCustomAndCommon","src","reduce_","pop","otherTerms","hasOwnProperty","Tokenizer","rules","Tokenizer.prototype.tokenize","rule","regexp","RegExp","exec","token","indexOf","output","texData"],"mappings":"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C/DlB,EGChB,eAAA,CHqDgBgB,EAtDAhB,EGEhBgJ,UAAA,gBAAA,CHFgBhJ,CGE6BgJ,UAAApH,GHF7B5B,EGGhBgJ,UAAA,aAAA,CHHgBhJ,CGG0BgJ,UAAAhH,GHH1BhC;CGIhBgJ,UAAA,sBAAA,CHJgBhJ,CGImCgJ,UAAA7G,GHJnCnC,EGKhBgJ,UAAA,iBAAA,CHLgBhJ,CGK8BgJ,UAAA5G,GHL9BpC,EGMhBgJ,UAAA,cAAA,CHNgBhJ,CGM2BgJ,UAAAjG,GHN3B/C,EGOhBgJ,UAAA,WAAA,CHPgBhJ,CGOwBgJ,UAAA5D,GHPxBpF,EGQhBgJ,UAAA,aAAA,CHRgBhJ,CGQ0BgJ,UAAAzD,GHR1BvF,EGShBgJ,UAAA,cAAA,CHTgBhJ,CGS2BgJ,UAAAvD,GHT3BzF,EGUhBgJ,UAAA,YAAA,CHVgBhJ,CGUyBgJ,UAAArD,GHVzB3F,EGWhBgJ,UAAA,cAAA,CHXgBhJ,CGW2BgJ,UAAA1D,EHX3BtF,EGYhBgJ,UAAA,WAAA,CHZgBhJ,CGYwBgJ,UAAAlD,GHZxB9F,EGahBgJ,UAAA,YAAA,CHbgBhJ,CGayBgJ,UAAAhD,GHbzBhG,EGchBgJ,UAAA,UAAA,CHdgBhJ,CGcuBgJ,UAAA9C,GHdvBlG,EGehBgJ,UAAA,gBAAA,CHfgBhJ,CGe6BgJ,UAAAC,GHf7BjJ;CGgBhBgJ,UAAA,cAAA,CHhBgBhJ,CGgB2BgJ,UAAAE,GHhB3BlJ,EGiBhBgJ,UAAA,cAAA,CHjBgBhJ,CGiB2BgJ,UAAAvC,GHjB3BzG,EGkBhBgJ,UAAA,YAAA,CHlBgBhJ,CGkByBgJ,UAAAG,GHlBzBnJ,EGmBhBgJ,UAAA,WAAA,CHnBgBhJ,CGmBwBgJ,UAAA9B,GHnBxBlH,EGoBhBgJ,UAAA,SAAA,CHpBgBhJ,CGoBsBgJ,UAAAI,GHpBtBpJ,EGqBhBgJ,UAAA,gBAAA,CHrBgBhJ,CGqB6BgJ,UAAAK,GHrB7BrJ,EGsBhBgJ,UAAA,QAAA,CHtBgBhJ,CGsBqBgJ,UAAAvB,GHtBrBzH,EGuBhBgJ,UAAA,mBAAA,CHvBgBhJ,CGuBgCgJ,UAAAM,GHvBhCtJ,EGwBhBgJ,UAAA,iBAAA,CHxBgBhJ,CGwB8BgJ,UAAAO,GHxB9BvJ,EGy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","file":"ComplexCurves.js","sourcesContent":["var resources = {};\nresources['Assembly.vert'] = '#ifdef GL_FRAGMENT_PRECISION_HIGH\\nprecision highp float;\\n#else\\nprecision mediump float;\\n#endif\\nin float index;\\nuniform float numIndices;\\nuniform sampler2D samplers[1 + N/2];\\nuniform float sheet;\\nout vec4 posValue;\\nvec2 texCoord[3];\\n\\n#define W 2048.0\\n#define H 2048.0\\nvec2 uvPosition (in float i) {\\n    return vec2 (mod (i, W) / W + 0.5 / W, floor (i / W) / H + 0.5 / H);\\n}\\n\\nvoid readTex (out vec2 pos[3], out float delta[3], out vec2 values[3*N]) {\\n    vec4 s;\\n    for (int i = 0; i < 3; i++) {\\n        s = texture (samplers[0], texCoord[i]);\\n        pos[i] = s.xy;\\n        delta[i] = s.z;\\n        for (int j = 1; j < N/2; j++) {\\n            s = texture (samplers[j], texCoord[i]);\\n            values[i*N+2*j-2] = s.xy;\\n            values[i*N+2*j-1] = s.zw;\\n        }\\n    }\\n}\\n\\nbool valid (in vec2 position[3], in float delta[3]) {\\n    return distance (position[0], position[1]) < min (delta[0], delta[1])\\n    && distance (position[1], position[2]) < min (delta[1], delta[2])\\n    && distance (position[2], position[0]) < min (delta[2], delta[0]);\\n}\\n\\nvoid main(void) {\\n    float which = mod (index, 3.0);\\n    texCoord[0] = uvPosition (index - which);\\n    texCoord[1] = uvPosition (index - which + 1.0);\\n    texCoord[2] = uvPosition (index - which + 2.0);\\n\\n    int isheet = int(sheet);\\n    if (isheet < sheets) {\\n        vec2 pos[3];\\n        float delta[3];\\n        vec2 values[3*N];\\n        readTex (pos, delta, values);\\n        if (valid (pos, delta)) {\\n            for (int s = 0; s < sheets; s++) {\\n                if (s == isheet) {\\n                    vec2 valueA = values[s];\\n                    int iwhich = int(which);\\n                    for (int w = 0; w < 3; w++) {\\n                        if (w == iwhich) {\\n                            vec2 valueWhich = values[w*N];\\n                            float dist, minDist = distance (valueA, valueWhich);\\n                            for (int i = 1; i < sheets; i++) {\\n                                dist = distance (valueA, values[w*N+i]);\\n                                if (dist < minDist)\\n                                {\\n                                    valueWhich = values[w*N+i];\\n                                    minDist = dist;\\n                                }\\n                            }\\n                            posValue = vec4(pos[w], valueWhich);\\n                        }\\n                    }\\n                }\\n            }\\n        return;\\n        }\\n    }\\n    posValue = vec4(-10.0, -10.0, -10.0, 1.0);\\n}\\n';\nresources['CachedSurface.frag'] = '#ifdef GL_FRAGMENT_PRECISION_HIGH\\nprecision highp float;\\n#else\\nprecision mediump float;\\n#endif\\nuniform bool clipping;\\nvarying vec4 vPos;\\nvarying vec2 vValue;\\nvec3 hue_to_rgb (in float hue)\\n{\\n    hue = mod (degrees (hue), 360.0) / 60.0;\\n    int h = int (floor (hue));\\n    float f = fract (hue);\\n    if (h == 0)\\n        return vec3 (1.0, f, 0.0);\\n    else if (h == 1)\\n        return vec3 (1.0 - f, 1.0, 0.0);\\n    else if (h == 2)\\n        return vec3 (0.0, 1.0, f);\\n    else if (h == 3)\\n        return vec3 (0.0, 1.0 - f, 1.0);\\n    else if (h == 4)\\n        return vec3 (f, 0.0, 1.0);\\n    else if (h == 5)\\n        return vec3 (1.0, 0.0, 1.0 - f);\\n}\\nfloat sawfct (float x, float dx, float a, float b)\\n{\\n    return a + (b - a) * fract (x / dx);\\n}\\nvoid main (void)\\n{\\n    if (clipping && vPos.y < 0.0)\\n        discard;\\n    float PI = acos (-1.0);\\n    float angle = atan (vValue.y, vValue.x);\\n    float blackp = sawfct (angle, PI / 12.0, 0.7, 1.0);\\n    float blackm = sawfct (log (length (vValue)), PI / 12.0, 0.7, 1.0);\\n    float black = blackp * blackm;\\n    gl_FragColor = vec4 (black * hue_to_rgb (angle), gl_FragCoord.z);\\n}\\n';\nresources['CachedSurface.vert'] = '#ifdef GL_FRAGMENT_PRECISION_HIGH\\nprecision highp float;\\n#else\\nprecision mediump float;\\n#endif\\nattribute vec4 position;\\nuniform mat4 m, v, p;\\nvarying vec4 vPos;\\nvarying vec2 vValue;\\nvoid main (void)\\n{\\n    vPos = vec4 (position.xyz, 1.0);\\n    vValue = position.zw;\\n    gl_Position = p * v * m * vPos;\\n}\\n';\nresources['Common.glsl'] = '#ifdef GL_FRAGMENT_PRECISION_HIGH\\nprecision highp float;\\n#else\\nprecision mediump float;\\n#endif\\n#define EPS 5e-3\\n\\n/* complex division */\\nvec2 cd (in vec2 a, in vec2 b) {\\n\treturn vec2 (a.x * b.x + a.y * b.y, a.y * b.x - a.x * b.y) / dot (b, b);\\n}\\n\\nvec2 cinv (in vec2 z) {\\n    return vec2(z.x, -z.y) / dot(z, z);\\n}\\n\\n/* complex square root */\\nvec2 csqrt (in vec2 z)\\n{\\n    float r = sqrt (length (z));\\n    float phi = 0.5 * atan (z.y, z.x);\\n    return r * vec2 (cos (phi), sin (phi));\\n}\\n\\nvec2 horner (in int n, in vec2 cs[N+1], in vec2 x) {\\n    vec2 p;\\n    for (int i = N - 1; i >= 0; i--)\\n        if (i >= n)\\n            p = cs[i];\\n        else if (i < n)\\n            p = cs[i] + cm(p, x);\\n    return p;\\n}\\n\\nvoid weierstrass (in vec2 cs[N+1], out vec2 roots2[N]) {\\n\t/* polynomial must be monic! */\\n    vec2 csn = cs[sheets];\\n    if (csn != vec2 (1.0, 0.0))\\n        for (int i = 0; i <= sheets; i++)\\n            cs[i] = cd (cs[i], csn);\\n\\n    float maxabs = length (cs[0]);\\n    for (int i = 1; i < N; i++)\\n        if (i < sheets)\\n            maxabs = max (maxabs, length (cs[i]));\\n    float upperBound = 1.0 + maxabs; /// length (cs[n]);\\n    float phi = 2.0 * acos (-1.0) / float (sheets + 1);\\n    float d = upperBound / float (sheets);\\n    d = clamp (d, 1.0, 10.0);\\n\tfor (int i = 0; i < sheets; i++)\\n        roots2[i] = float (i) * d * vec2 (cos (float (i) * phi), sin (float (i) * phi));\\n\\n\tconst int maxiter = 50;\\n\tbool changing;\\n\tfor (int iter = 0; iter < maxiter; iter++)\\n\t{\\n\t\tchanging = false;\\n\t\tfor (int i = 0; i < sheets; i++)\\n        {\\n            vec2 result = vec2 (1.0, 0.0);\\n            for (int j = 0; j < sheets; j++)\\n                if (j != i)\\n                    result = cm (result, roots2[i] - roots2[j]);\\n            vec2 update = cd (horner (sheets, cs, roots2[i]), result);\\n            ///* safe-guard against large update */\\n            //if (sheets > 1 && length (update) > 10)\\n            //\tupdate /= length (update);\\n            if (length (update) > 1e-2)\\n                changing = true;\\n            roots2[i] -= update;\\n        }\\n        if (!changing)\\n            break;\\n\t}\\n}\\n\\nvoid quadratic_roots (in vec2 cs[N+1], out vec2 qroots[2]) {\\n    if (cs[0] == vec2 (0.0, 0.0)) {\\n        qroots[0] = vec2 (0.0, 0.0);\\n        qroots[1] = -cd (cs[1], cs[2]);\\n    }\\n    else\\n    {\\n        vec2 r = csqrt (cm (cs[1], cs[1]) - 4.0 * cm (cs[2], cs[0]));\\n        if (cs[1].x >= 0.0)\\n            r = -r;\\n        qroots[0] = cd (r - cs[1], 2.0 * cs[2]);\\n        qroots[1] = cd (2.0 * cs[0], r - cs[1]);\\n    }\\n}\\n\\nvoid roots (in int n, in vec2 cs[N+1], out vec2 roots[N])\\n{\\n    if (n == 1) {\\n        roots[0] = -cd (cs[0], cs[1]);\\n        return;\\n    }\\n    if (n == 2) {\\n        vec2 qroots[2];\\n        quadratic_roots (cs, qroots);\\n        roots[0] = qroots[0];\\n        roots[1] = qroots[1];\\n        return;\\n    }\\n    weierstrass (cs, roots);\\n    /* selection sort by real part */\\n    /*\\n    for(int i = 0; i < n - 1; i++)\\n    {\\n        int jmin = i;\\n        for (int j = i + 1; j < n; j++)\\n            if (roots[j].x < roots[jmin].x)\\n                jmin = j;\\n        vec2 z = roots[i];\\n        roots[i] = roots[jmin];\\n        roots[jmin] = z;\\n    }\\n    */\\n}\\n\\nvoid f (in vec2 x, out vec2 cs[N+1]);\\nvec2 fx (in vec2 x, in vec2 y);\\nvec2 fy (in vec2 x, in vec2 y);\\nfloat rho (in vec2 x);\\nfloat M (in vec2 x, in float rho);\\n\\nfloat epsilon (in vec2 ys[N]) {\\n    float d = distance (ys[0], ys[1]);\\n    if (sheets < 2)\\n        return 1.0 / 0.0;\\n    for (int j = 0; j < sheets; j++) {\\n        for (int k = 0; k < sheets; k++) {\\n            if (k > j)\\n                d = min (d, distance (ys[j], ys[k]));\\n        }\\n    }\\n    return d / 2.0;\\n}\\n\\nfloat Y (in vec2 x, in vec2 ys[N]) {\\n    float y = length (cd (fx (x, ys[0]), fy (x, ys[0])));\\n    for (int j = 0; j < sheets; j++)\\n        y = max (y, length (cd (fx (x, ys[j]), fy (x, ys[j]))));\\n    return y;\\n}\\n\\nfloat Delta (in vec2 x, in vec2 ys[N]) {\\n    float eps = epsilon (ys);\\n    float r = rho (x);\\n    float m = M (x, r);\\n    float y = Y (x, ys);\\n    return r * (sqrt (pow (r * y - eps, 2.0) + 4.0 * eps * m) -\\n        (r * y + eps)) / (2.0 * (m - r * y));\\n}\\n';\nresources['DomainColouring.frag'] = 'uniform int sheet;\\nvarying vec2 vPosition;\\nvec3 hue_to_rgb (in float hue)\\n{\\n    hue = mod (degrees (hue), 360.0) / 60.0;\\n    int h = int (floor (hue));\\n    float f = fract (hue);\\n    if (h == 0)\\n        return vec3 (1.0, f, 0.0);\\n    else if (h == 1)\\n        return vec3 (1.0 - f, 1.0, 0.0);\\n    else if (h == 2)\\n        return vec3 (0.0, 1.0, f);\\n    else if (h == 3)\\n        return vec3 (0.0, 1.0 - f, 1.0);\\n    else if (h == 4)\\n        return vec3 (f, 0.0, 1.0);\\n    else if (h == 5)\\n        return vec3 (1.0, 0.0, 1.0 - f);\\n}\\nfloat sawfct (float x, float dx, float a, float b)\\n{\\n    return a + (b - a) * fract (x / dx);\\n}\\nvoid main (void)\\n{\\n    vec2 cs[N+1];\\n    vec2 ys[N];\\n    vec2 value;\\n    f (vPosition, cs);\\n    roots (sheets, cs, ys);\\n    int smaller;\\n    for (int i = 0; i < sheets; i++)\\n    {\\n        smaller = 0;\\n        for (int j = 0; j < sheets; j++)\\n            if (ys[j].x < ys[i].x)\\n                smaller++;\\n        if (smaller == sheet - 1)\\n            value = ys[i];\\n    }\\n        \\n    float PI = acos (-1.0);\\n    float angle = atan (value.y, value.x);\\n    float blackp = sawfct (angle, PI / 12.0, 0.7, 1.0);\\n    float blackm = sawfct (log (length (value)), PI / 12.0, 0.7, 1.0);\\n    float black = blackp * blackm;\\n    gl_FragColor = vec4 (black * hue_to_rgb(angle), 1.0);\\n}\\n';\nresources['DomainColouring.vert'] = '#ifdef GL_FRAGMENT_PRECISION_HIGH\\nprecision highp float;\\n#else\\nprecision mediump float;\\n#endif\\nattribute vec2 position;\\nvarying vec2 vPosition;\\nvoid main () {\\n    gl_Position = vec4 (position, 0.0, 1.0);\\n    vPosition = 5.0 * position;\\n}\\n';\nresources['Dummy.frag'] = '#version 300 es\\n#ifdef GL_FRAGMENT_PRECISION_HIGH\\nprecision highp float;\\n#else\\nprecision mediump float;\\n#endif\\nout vec4 fColor;\\nvoid main(void) {\\n    fColor = vec4(1.0);\\n}\\n';\nresources['Export.frag'] = '#version 300 es\\n#ifdef GL_FRAGMENT_PRECISION_HIGH\\nprecision highp float;\\n#else\\nprecision mediump float;\\n#endif\\nin vec2 vValue;\\nout vec4 fColor;\\nvec3 hue_to_rgb (in float hue)\\n{\\n    hue = mod (degrees (hue), 360.0) / 60.0;\\n    int h = int (floor (hue));\\n    float f = fract (hue);\\n    if (h == 0)\\n        return vec3 (1.0, f, 0.0);\\n    else if (h == 1)\\n        return vec3 (1.0 - f, 1.0, 0.0);\\n    else if (h == 2)\\n        return vec3 (0.0, 1.0, f);\\n    else if (h == 3)\\n        return vec3 (0.0, 1.0 - f, 1.0);\\n    else if (h == 4)\\n        return vec3 (f, 0.0, 1.0);\\n    else if (h == 5)\\n        return vec3 (1.0, 0.0, 1.0 - f);\\n}\\nfloat sawfct (float x, float dx, float a, float b)\\n{\\n    return a + (b - a) * fract (x / dx);\\n}\\nvoid main (void)\\n{\\n    float PI = acos (-1.0);\\n    float angle = atan (vValue.y, vValue.x);\\n    float blackp = sawfct (angle / (2.0 * PI), 0.05, 0.7, 1.0);\\n    float blackm = sawfct (log (length (vValue)), 0.1 * PI, 0.7, 1.0);\\n    float black = blackp * blackm;\\n    fColor = vec4 (black * hue_to_rgb(angle), 1.0);\\n}\\n';\nresources['Export.vert'] = '#version 300 es\\nuniform float maxValue;\\nuniform float minValue;\\nin vec2 vPosition;\\nout vec2 vValue;\\n\\nvoid main()\\n{\\n  gl_Position = vec4(vPosition, 0.0, 1.0);\\n  vValue = 0.5 * (maxValue - minValue) * (vPosition + vec2 (1.0, 1.0))\\n    + vec2 (minValue, minValue);\\n}\\n';\nresources['FXAA.frag'] = '#ifdef GL_FRAGMENT_PRECISION_HIGH\\nprecision highp float;\\n#else\\nprecision mediump float;\\n#endif\\nuniform sampler2D u_tex;\\nuniform float width;\\nuniform float height;\\n\\n#define FXAA_REDUCE_MIN (1.0/ 128.0)\\n#define FXAA_REDUCE_MUL (1.0 / 8.0)\\n#define FXAA_SPAN_MAX 8.0\\n// from https://github.com/mitsuhiko/webgl-meincraft/blob/master/assets/shaders/fxaa.glsl\\nvec4 applyFXAA(in vec2 fragCoord, in sampler2D tex)\\n{\\n    vec4 color;\\n    vec2 inverseVP = vec2(1.0 / width, 1.0 / height);\\n    vec3 rgbNW = texture2D(tex, (fragCoord + vec2(-1.0, -1.0)) * inverseVP).xyz;\\n    vec3 rgbNE = texture2D(tex, (fragCoord + vec2(1.0, -1.0)) * inverseVP).xyz;\\n    vec3 rgbSW = texture2D(tex, (fragCoord + vec2(-1.0, 1.0)) * inverseVP).xyz;\\n    vec3 rgbSE = texture2D(tex, (fragCoord + vec2(1.0, 1.0)) * inverseVP).xyz;\\n    vec3 rgbM = texture2D(tex, fragCoord * inverseVP).xyz;\\n    vec3 luma = vec3(0.299, 0.587, 0.114);\\n    float lumaNW = dot(rgbNW, luma);\\n    float lumaNE = dot(rgbNE, luma);\\n    float lumaSW = dot(rgbSW, luma);\\n    float lumaSE = dot(rgbSE, luma);\\n    float lumaM = dot(rgbM, luma);\\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\\n    vec2 dir;\\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\\n    dir.y = ((lumaNW + lumaSW) - (lumaNE + lumaSE));\\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\\n    (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\\n    max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\\n    dir * rcpDirMin)) * inverseVP;\\n    vec3 rgbA = 0.5 * (\\n    texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\\n    texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\\n    texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\\n    texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\\n    float lumaB = dot(rgbB, luma);\\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\\n        color = vec4(rgbA, 1.0);\\n    else\\n        color = vec4(rgbB, 1.0);\\n    return color;\\n}\\n\\nvoid main (void)\\n{\\n    gl_FragColor = applyFXAA(gl_FragCoord.xy, u_tex);\\n}\\n';\nresources['FXAA.vert'] = '#ifdef GL_FRAGMENT_PRECISION_HIGH\\nprecision highp float;\\n#else\\nprecision mediump float;\\n#endif\\nattribute vec2 vPosition;\\nvoid main()\\n{\\n  gl_Position = vec4(vPosition, 0.0, 1.0);\\n}\\n';\nresources['Initial.vert'] = '#ifdef GL_FRAGMENT_PRECISION_HIGH\\nprecision highp float;\\n#else\\nprecision mediump float;\\n#endif\\nin vec2 pos;\\nout vec2 position;\\nout float delta;\\nout float subdivisionFlag;\\nout vec2 values[N];\\nvoid main (void) {\\n    position = clamp (pos, -5.0, 5.0);\\n    vec2 cs[N+1];\\n    f (position, cs);\\n    roots (sheets, cs, values);\\n    delta = Delta (position, values);\\n    subdivisionFlag = 1.0;\\n}\\n';\nresources['Subdivision.vert'] = '#ifdef GL_FRAGMENT_PRECISION_HIGH\\nprecision highp float;\\n#else\\nprecision mediump float;\\n#endif\\nin vec3 barycentric;\\nin float indexOffsetIn;\\nuniform sampler2D samplers[1 + N/2];\\nout vec2 position;\\nout float delta;\\nout float subdivisionFlag;\\nout vec2 values[N];\\n\\n#define W 2048.0\\n#define H 2048.0\\nvec2 uvPosition (in float i) {\\n    return vec2 (mod (i, W) / W + 0.5 / W, floor (i / W) / H + 0.5 / H);\\n}\\n\\nvoid main (void) {\\n    vec2 texCoord[3];\\n    texCoord[0] = uvPosition (indexOffsetIn);\\n    texCoord[1] = uvPosition (indexOffsetIn + 1.0);\\n    texCoord[2] = uvPosition (indexOffsetIn + 2.0);\\n    vec4 tmp;\\n\\n    if (barycentric == vec3 (1.0, 0.0, 0.0)) {\\n        tmp = texture (samplers[0], texCoord[0]);\\n        position = tmp.xy;\\n        delta = tmp.z;\\n        subdivisionFlag = tmp.w;\\n        for (int j = 1; j < 1 + N/2; j++) {\\n            tmp = texture (samplers[j], texCoord[0]);\\n            values[2 * j - 2] = tmp.xy;\\n            values[2 * j - 1] = tmp.zw;\\n        }\\n    } else if (barycentric == vec3 (0.0, 1.0, 0.0)) {\\n        tmp = texture (samplers[0], texCoord[1]);\\n        position = tmp.xy;\\n        delta = tmp.z;\\n        subdivisionFlag = tmp.w;\\n        for (int j = 1; j < 1 + N/2; j++) {\\n            tmp = texture (samplers[j], texCoord[1]);\\n            values[2 * j - 2] = tmp.xy;\\n            values[2 * j - 1] = tmp.zw;\\n        }\\n    } else if (barycentric == vec3 (0.0, 0.0, 1.0)) {\\n        tmp = texture (samplers[0], texCoord[2]);\\n        position = tmp.xy;\\n        delta = tmp.z;\\n        subdivisionFlag = tmp.w;\\n        for (int j = 1; j < 1 + N/2; j++) {\\n            tmp = texture (samplers[j], texCoord[2]);\\n            values[2 * j - 2] = tmp.xy;\\n            values[2 * j - 1] = tmp.zw;\\n        }\\n    } else {\\n        position = barycentric.x * texture (samplers[0], texCoord[0]).xy\\n                 + barycentric.y * texture (samplers[0], texCoord[1]).xy\\n                 + barycentric.z * texture (samplers[0], texCoord[2]).xy;\\n        vec2 cs[N+1];\\n        f (position, cs);\\n        roots (sheets, cs, values);\\n        delta = Delta (position, values);\\n        subdivisionFlag = 1.0;\\n    }\\n}\\n';\nresources['SubdivisionPre.vert'] = '#ifdef GL_FRAGMENT_PRECISION_HIGH\\nprecision highp float;\\n#else\\nprecision mediump float;\\n#endif\\nin float index;\\nuniform sampler2D samplers[1 + N/2];\\nout vec2 position;\\nout float delta;\\nout float subdivisionFlag;\\nout vec2 values[N];\\n\\n#define W 2048.0\\n#define H 2048.0\\nvec2 uvPosition (in float i) {\\n    return vec2 (mod (i, W) / W + 0.5 / W, floor (i / W) / H + 0.5 / H);\\n}\\n\\nvoid main (void) {\\n    float which = mod (index, 3.0);\\n    vec2 texCoordWhich = uvPosition (index);\\n    vec2 texCoord[3];\\n    texCoord[0] = uvPosition (index - which);\\n    texCoord[1] = uvPosition (index - which + 1.0);\\n    texCoord[2] = uvPosition (index - which + 2.0);\\n    vec4 s = texture (samplers[0], texCoordWhich);\\n    position = s.xy;\\n    delta = s.z;\\n    subdivisionFlag = 0.0;\\n    vec3 positionDelta[3];\\n    positionDelta[0] = texture (samplers[0], texCoord[0]).xyz;\\n    positionDelta[1] = texture (samplers[0], texCoord[1]).xyz;\\n    positionDelta[2] = texture (samplers[0], texCoord[2]).xyz;\\n    if (distance (positionDelta[0].xy, positionDelta[1].xy) >= min (positionDelta[0].z, positionDelta[1].z))\\n        subdivisionFlag += 4.0;\\n    if (distance (positionDelta[1].xy, positionDelta[2].xy) >= min (positionDelta[1].z, positionDelta[2].z))\\n        subdivisionFlag += 2.0;\\n    if (distance (positionDelta[2].xy, positionDelta[0].xy) >= min (positionDelta[2].z, positionDelta[0].z))\\n        subdivisionFlag += 1.0;\\n    if (subdivisionFlag == 3.0 && distance (positionDelta[0].xy, 0.5 * (positionDelta[1].xy + positionDelta[2].xy)) < distance (positionDelta[1].xy, 0.5 * (positionDelta[0].xy + positionDelta[2].xy)))\\n        subdivisionFlag = 8.0;\\n    if (subdivisionFlag == 5.0 && distance (positionDelta[1].xy, 0.5 * (positionDelta[0].xy + positionDelta[2].xy)) < distance (positionDelta[2].xy, 0.5 * (positionDelta[0].xy + positionDelta[1].xy)))\\n        subdivisionFlag = 9.0;\\n    if (subdivisionFlag == 6.0 && distance (positionDelta[2].xy, 0.5 * (positionDelta[0].xy + positionDelta[1].xy)) < distance (positionDelta[0].xy, 0.5 * (positionDelta[1].xy + positionDelta[2].xy)))\\n        subdivisionFlag = 10.0;\\n    for (int i = 1; i < N/2; i++) {\\n        s = texture (samplers[i], texCoordWhich);\\n        values[2*i-2] = s.xy;\\n        values[2*i-1] = s.zw;\\n    }\\n}\\n';\nresources['Surface.frag'] = '#ifdef GL_FRAGMENT_PRECISION_HIGH\\nprecision highp float;\\n#else\\nprecision mediump float;\\n#endif\\nuniform bool clipping;\\nin vec4 vPos;\\nin vec2 v_value;\\nout vec4 fColor;\\nvec3 hue_to_rgb (in float hue)\\n{\\n    hue = mod (degrees (hue), 360.0) / 60.0;\\n    int h = int (floor (hue));\\n    float f = fract (hue);\\n    if (h == 0)\\n        return vec3 (1.0, f, 0.0);\\n    else if (h == 1)\\n        return vec3 (1.0 - f, 1.0, 0.0);\\n    else if (h == 2)\\n        return vec3 (0.0, 1.0, f);\\n    else if (h == 3)\\n        return vec3 (0.0, 1.0 - f, 1.0);\\n    else if (h == 4)\\n        return vec3 (f, 0.0, 1.0);\\n    else if (h == 5)\\n        return vec3 (1.0, 0.0, 1.0 - f);\\n}\\nfloat sawfct (float x, float dx, float a, float b)\\n{\\n    return a + (b - a) * fract (x / dx);\\n}\\nvoid main (void)\\n{\\n    if (clipping && vPos.y < 0.0)\\n        discard;\\n    float PI = acos (-1.0);\\n    float angle = atan (v_value.y, v_value.x);\\n    float blackp = sawfct (angle, PI / 12.0, 0.7, 1.0);\\n    float blackm = sawfct (log (length (v_value)), PI / 12.0, 0.7, 1.0);\\n    float black = blackp * blackm;\\n    fColor = vec4 (black * hue_to_rgb (angle), gl_FragCoord.z);\\n}\\n';\nresources['Surface.vert'] = '#version 300 es\\n#ifdef GL_FRAGMENT_PRECISION_HIGH\\nprecision highp float;\\n#else\\nprecision mediump float;\\n#endif\\nuniform mat4 m;\\nuniform mat4 v;\\nuniform mat4 p;\\nin vec4 posValue;\\nout vec4 vPos;\\nout vec2 v_value;\\nvoid main (void)\\n{\\n    vPos = vec4 (posValue.xyz, 1.0);\\n    v_value = posValue.zw;\\n    gl_Position = p * v * m * vPos;\\n}\\n';","export function PolynomialParser() {}\n\n/**\n * @param {Parser.AST} tree\n * @return {Polynomial}\n */\nPolynomialParser.eval = function(tree) {\n    if (tree === null)\n        return null;\n    var type = tree.type;\n    var value = tree.value;\n    var first, second;\n    if (type === \"infix\") {\n        first = PolynomialParser.eval( /** @type {Parser.InfixLeaf} */ (tree).first);\n        second = PolynomialParser.eval( /** @type {Parser.InfixLeaf} */ (tree).second);\n        if (value === \"+\")\n            return Polynomial.add(first, second);\n        else if (value === \"-\")\n            return Polynomial.sub(first, second);\n        else if (value === \"*\")\n            return Polynomial.mul(first, second);\n        else if (value === \"^\") {\n            if (second.isConstant()) {\n                var s = second.constant();\n                if (s.re >= 0 && s.im === 0)\n                    return Polynomial.pow(first, s.re);\n            }\n            console.error(\"Illegal exponent\");\n        } else\n            console.error(\"Infix operator '\" + value + \"' not implemented\");\n    } else if (type === \"prefix\") {\n        first = PolynomialParser.eval( /** @type {Parser.PrefixLeaf} */ (tree).first);\n        if (value === \"+\")\n            return first;\n        else if (value === \"-\")\n            return first.neg();\n        else\n            console.error(\"Prefix operator '\" + value + \"' not implemented\");\n    } else if (type === \"number\") {\n        return Polynomial.real(parseFloat(value));\n    } else if (type === \"variable\")\n        return Polynomial.variable(value);\n    else if (type === \"imaginary\")\n        return Polynomial.complex(new Complex(0, 1));\n    return null;\n};\n\n/**\n * @param {!Polynomial} p\n * @return {boolean}\n */\nPolynomialParser.isBivariate = function(p) {\n    return p.isBivariate();\n};\n\n/**\n * @param {string} str\n * @return {Parser.AST}\n */\nPolynomialParser.parse = function(str) {\n    var rules = [\n        [\"\\\\d*\\\\.\\\\d*\", \"number\"],\n        [\"\\\\d+\", \"number\"],\n        [\"i\", \"imaginary\"],\n        [\"[a-hj-z]\", \"variable\"],\n        [\"[\\\\+\\\\*\\\\^-]\", \"operator\"],\n        [\"[\\\\(\\\\)]\", \"parenthesis\"]\n    ];\n    var tokens = new Tokenizer(rules).tokenize(str);\n\n    /*\n\n    polynomial = expr, eoi ;\n\n    expr = [ sign ] term { sign, term } ;\n\n    sign = \"+\" | \"-\" ;\n\n    term = factor { \"*\", factor } ;\n\n    factor = base [power] ;\n\n    power = \"^\", number [power] ;\n\n    base = \"(\", expr, \")\" | number | imaginary | variable ;\n\n    */\n\n    var number = literal(\"number\");\n    var imaginary = literal(\"imaginary\");\n    var variable = literal(\"variable\");\n    var plus = symb(\"+\");\n    var minus = symb(\"-\");\n    var /** Parser.Combinator */ sign = or(plus, minus);\n    var times = symb(\"*\");\n    var pow = symb(\"^\");\n\n    /**\n     * @param {Parser.Leaf} f\n     * @param {Array<Parser.Leaf>} fs\n     * @return {Parser.AST}\n     */\n    function infixCombine(f, fs) {\n        /**\n         * @param {Parser.AST} acc\n         * @param {Parser.AST} v\n         * @return {Parser.AST}\n         */\n        function infixCombine_(acc, v) {\n            return {\n                type: \"infix\",\n                value: /** @type {Parser.InfixLeaf} */ (v[0]).value,\n                first: acc,\n                second: v[1]\n            };\n        }\n        return fs === [] ? f : fs.reduce(infixCombine_, f);\n    }\n\n    /**\n     * @param {Parser.Tokens} input\n     * @return {Parser.Leaf|null}\n     */\n    function polynomial(input) {\n        var p = /** @type {Array<Parser.Leaf>|null} */ (and(expr, eoi)(input));\n        return p === null ? null : p[0];\n    }\n\n    /**\n     * @param {Parser.Tokens} input\n     * @return {Parser.AST}\n     */\n    function expr(input) {\n        var e = and(or(prefix(sign, term), term), many(and(sign, term)))(input);\n        return e === null ? null : infixCombine(e[0], e[1]);\n    }\n\n    /**\n     * @param {Parser.Tokens} input\n     * @return {Parser.AST}\n     */\n    function term(input) {\n        var t = and(factor, many(and(times, factor)))(input);\n        return t === null ? null : infixCombine(t[0], t[1]);\n    }\n\n    /**\n     * @param {Parser.Tokens} input\n     * @return {Parser.AST}\n     */\n    function factor(input) {\n        var b = base(input);\n        if (b === null)\n            return null;\n        var p = power(input);\n        return p === null ? b : {\n            type: \"infix\",\n            value: \"^\",\n            first: b,\n            second: p\n        };\n    }\n\n    /**\n     * @param {Parser.Tokens} input\n     * @return {Parser.Token|Parser.InfixLeaf|null}\n     */\n    function power(input) {\n        var p = and(pow, number)(input);\n        if (p === null)\n            return null;\n        var q = /** @type {Parser.Token|Parser.InfixLeaf|null} */ (power(input));\n        return q === null ? /** @type {Parser.Token} */ (p[1]) : /** @type {Parser.InfixLeaf} */ ({\n            type: \"infix\",\n            value: \"^\",\n            first: p[1],\n            second: q\n        });\n    }\n\n    /**\n     * @param {Parser.Tokens} input\n     * @return {Parser.AST}\n     */\n    function base(input) {\n        return or(parenthesized(expr), number, imaginary, variable)(input);\n    }\n\n    var parse = polynomial;\n    var tree = parse(tokens);\n    return tree;\n};\n\n/**\n * @param {!Polynomial} p\n * @return {number}\n */\nPolynomialParser.sheets = function(p) {\n    return p.sheets();\n};\n","/**\n * @param {Array<Term>} terms\n * @constructor\n */\nfunction Polynomial(terms) {\n    if (terms.length === 0)\n        this.terms = [new Term(Complex.zero(), new Monomial({}))];\n    else\n        this.terms = Term.reduce(terms);\n}\n\n/**\n * @param {Polynomial} p\n * @param {Polynomial} q\n * @return {Polynomial}\n */\nPolynomial.add = function(p, q) {\n    return new Polynomial(Term.reduce(p.terms.concat(q.terms)));\n};\n\n/**\n * @param {Polynomial} p\n * @return {Polynomial}\n */\nPolynomial.prototype.add = function(p) {\n    return Polynomial.add(this, p);\n};\n\n/**\n * @param {Complex} z\n * @return {Polynomial}\n */\nPolynomial.complex = function(z) {\n    return new Polynomial([new Term(z, new Monomial({}))]);\n};\n\n/**\n * j-th coefficient of a Polynomial in a given variable\n * @param {string} v\n * @param {number} j\n * @return {Polynomial}\n */\nPolynomial.prototype.coefficient = function(v, j) {\n    var terms = this.terms;\n    var ps = [];\n    for (var i = 0, l = terms.length; i < l; i++) {\n        var term = terms[i];\n        if ((term.monomial.value[v] || 0) === j) {\n            var m = Monomial.clone(term.monomial);\n            delete m.value[v];\n            ps.push(new Term(term.coefficient, m));\n        }\n    }\n    return new Polynomial(ps);\n};\n\n/**\n * list of coefficients of a given variable\n * ordered from highest to lowest degree\n * @param {string} v\n * @return {Array<Polynomial>}\n */\nPolynomial.prototype.coefficientList = function(v) {\n    var n = this.degree(v);\n    var cs = [];\n    for (var i = 0; i <= n; i++)\n        cs[i] = this.coefficient(v, n - i);\n    return cs;\n};\n\n/**\n * list of coefficients of a univariate polynomial\n * ordered from highest to lowest degree\n * @return {Array<Complex>}\n */\nPolynomial.prototype.coefficientList_ = function() {\n    var vars = this.variableList();\n    var l = vars.length;\n    if (l > 1)\n        console.error(\"Polynomial is not univariate\");\n    var v = l > 0 ? vars[0] : \"x\";\n    var cs = this.coefficientList(v);\n    var cs_ = [];\n    for (var i = 0, k = cs.length; i < k; i++)\n        cs_[i] = cs[i].constant();\n    return cs_;\n};\n\n/**\n * constant term of Polynomial as number\n * @return {Complex}\n */\nPolynomial.prototype.constant = function() {\n    var c = Complex.zero();\n    var terms = this.terms;\n    for (var i = 0, l = terms.length; i < l; i++) {\n        var term = terms[i];\n        var m = term.monomial.value;\n        if (m === null || Object.keys(m).length === 0)\n            c = Complex.add(c, term.coefficient);\n    }\n    return c;\n};\n\n/**\n * deflate a Polynomial coefficient list by a monomial x - x0\n * using Horner's method\n * @param {Array<Complex>} cs\n * @param {Complex} x0\n * @return {Array<Complex>}\n */\nPolynomial.deflate = function(cs, x0) {\n    // deflate (p:ps) x0 = init $ scanl (\\y c -> c + x0 * y) p ps\n    var fx = [cs[0]];\n    for (var i = 1, l = cs.length - 1; i < l; i++)\n        fx[i] = Complex.add(cs[i], Complex.mul(fx[i - 1], x0));\n    return fx;\n};\n\n/**\n * determine the degree of a Polynomial in a given variable\n * @param {string} v\n * @return {number}\n */\nPolynomial.prototype.degree = function(v) {\n    var n = 0;\n    var terms = this.terms;\n    for (var i = 0, l = terms.length; i < l; i++)\n        n = Math.max(n, terms[i].monomial.value[v] || 0);\n    return n;\n};\n\n/**\n * @param {string} v\n * @return {Polynomial}\n */\nPolynomial.prototype.diff = function(v) {\n    var terms = this.terms;\n    var ps = [];\n    for (var i = 0, l = terms.length; i < l; i++) {\n        var m = terms[i].monomial;\n        var e = m.value[v] || 0;\n        if (e > 0) {\n            var c = Complex.mul(terms[i].coefficient, Complex.real(e));\n            m = Monomial.clone(m);\n            m.value[v] = e - 1;\n            ps.push(new Term(c, m));\n        }\n    }\n    return new Polynomial(ps);\n};\n\n/**\n * discriminant of a Polynomial w.r.t. a given variable\n * @param {string} v\n * @return {Polynomial}\n */\nPolynomial.prototype.discriminant = function(v) {\n    return Polynomial.resultant(v, this, this.diff(v));\n};\n\n/** @return {boolean} */\nPolynomial.prototype.isBivariate = function() {\n    return this.variableList().length === 2;\n};\n\n/** @return {boolean} */\nPolynomial.prototype.isConstant = function() {\n    return this.variableList().length === 0 && this.terms.length !== 0;\n};\n\n/** @return {boolean} */\nPolynomial.prototype.isUnivariate = function() {\n    return this.variableList().length === 1;\n};\n\n/**\n * approximate one root of a given Polynomial up to given tolerance\n * using at most a given number of Laguerre iterations\n * Polynomial must be given as coefficient list\n * @param {Array<Complex>} cs\n * @param {Complex} x\n * @param {number} maxiter\n * @return {Complex}\n */\nPolynomial.laguerre = function(cs, x, maxiter) {\n    var n = cs.length - 1;\n    var rand = [1.0, 0.3141, 0.5926, 0.5358, 0.9793, 0.2385, 0.6264, 0.3383,\n        0.2795, 0.0288\n    ];\n    var a, p, q, s, g, g2, h, r, d1, d2;\n    var tol = 1e-14;\n    for (var iter = 1; iter <= maxiter; iter++) {\n        s = Complex.zero();\n        q = Complex.zero();\n        p = cs[0];\n\n        for (var i = 1; i <= n; i++) {\n            s = Complex.add(q, Complex.mul(s, x));\n            q = Complex.add(p, Complex.mul(q, x));\n            p = Complex.add(cs[i], Complex.mul(p, x));\n        }\n\n        if (p.abs() < tol)\n            return x;\n\n        g = Complex.div(q, p);\n        g2 = Complex.mul(g, g);\n        h = Complex.sub(g2, Complex.div(Complex.mul(Complex.real(2), s), p));\n        r = Complex.sqrt(Complex.mul(Complex.real(n - 1), Complex.sub(\n            Complex.mul(Complex.real(n), h), g2)));\n        d1 = Complex.add(g, r);\n        d2 = Complex.sub(g, r);\n        if (d1.abs() < d2.abs())\n            d1 = d2;\n        if (tol < d1.abs())\n            a = Complex.div(Complex.real(n), d1);\n        else\n            a = Complex.mul(Complex.real(x.abs() + 1), new Complex(Math.cos(\n                iter), Math.sin(iter)));\n        if (a.abs() < tol)\n            return x;\n        if (iter % 20 === 0 && iter < maxiter - 19)\n            a = Complex.mul(a, Complex.real(rand[Math.floor(iter / 20)]));\n        x = Complex.sub(x, a);\n    }\n    return x;\n};\n\n/**\n * leading coefficient of a Polynomial in a given variable\n * @param {string} v\n * @return {Polynomial}\n */\nPolynomial.prototype.leading = function(v) {\n    return this.coefficient(v, this.degree(v));\n};\n\n/**\n * @param {Polynomial} p\n * @param {Polynomial} q\n * @return {Polynomial}\n */\nPolynomial.mul = function(p, q) {\n    var ps = p.terms,\n        qs = q.terms;\n    var terms = [];\n    for (var i = 0, l = ps.length; i < l; i++)\n        for (var j = 0, k = qs.length; j < k; j++)\n            terms.push(Term.mul(ps[i], qs[j]));\n    return new Polynomial(Term.reduce(terms));\n};\n\n/**\n * @param {Polynomial} p\n * @return {Polynomial}\n */\nPolynomial.prototype.mul = function(p) {\n    return Polynomial.mul(this, p);\n};\n\n/** @return {Polynomial} */\nPolynomial.prototype.neg = function() {\n    var terms = this.terms;\n    var ts = [];\n    for (var i = 0, l = terms.length; i < l; i++)\n        ts.push(Term.neg(terms[i]));\n    return new Polynomial(ts);\n};\n\n/**\n * @param {Polynomial} p\n * @param {number} e\n * @return {Polynomial}\n */\nPolynomial.pow = function(p, e) {\n    var res = Polynomial.real(1);\n    if (!Number.isInteger(e))\n        console.error(\"Non-integer power of Polynomial!\");\n    // TODO use fast exponentiation\n    for (var i = e; i > 0; i--)\n        res = Polynomial.mul(res, p);\n    return res;\n};\n\n/**\n * @param {number} e\n * @return {Polynomial}\n */\nPolynomial.prototype.pow = function(e) {\n    return Polynomial.pow(this, e);\n};\n\n/**\n * @param {Array<Complex>} cs\n * @return {Array<Complex>}\n */\nPolynomial.quadratic_roots = function(cs) {\n    var a = cs[0],\n        b = cs[1],\n        c = cs[2];\n    if (c.re === 0 && c.im === 0)\n        return [Complex.zero(), Complex.div(b, a).neg()];\n    var r = Complex.sqrt(Complex.sub(Complex.mul(b, b),\n        Complex.mul(Complex.real(4), Complex.mul(a, c))));\n    if (b.re >= 0)\n        r = r.neg();\n    return [Complex.div(Complex.sub(r, b), Complex.mul(Complex.real(2), a)),\n        Complex.div(Complex.mul(Complex.real(2), c), Complex.sub(r, b))\n    ];\n};\n\n/**\n * @param {number} x\n * @return {Polynomial}\n */\nPolynomial.real = function(x) {\n    return new Polynomial([new Term(Complex.real(x), new Monomial({}))]);\n};\n\n/**\n * @param {string} v\n * @param {Polynomial} p\n * @param {Polynomial} q\n * @return {Polynomial}\n */\nPolynomial.resultant = function(v, p, q) {\n    var syl = /** @type {Matrix<Polynomial>} */ (Polynomial.sylvester(v, p, q));\n    return syl.det();\n};\n\n/**\n * @param {Array<Complex>} cs\n * @return {Array<Complex>}\n */\nPolynomial.roots = function(cs) {\n    var roots = [];\n    var cs_orig = cs;\n    var n = cs.length - 1;\n    if (n <= 0)\n        return [];\n    if (Complex.isZero(cs[0])) {\n        roots = Polynomial.roots(cs.slice(1));\n        roots.push(Complex.infinity);\n        return roots;\n    }\n    if (n === 1)\n        roots[0] = Complex.div(cs[1], cs[0]).neg();\n    else if (n === 2)\n        roots = Polynomial.quadratic_roots(cs);\n    else {\n        for (var i = 0; i < n - 2; i++) {\n            roots[i] = Polynomial.laguerre(cs, Complex.zero(), 200);\n            roots[i] = Polynomial.laguerre(cs_orig, roots[i], 1);\n            cs = Polynomial.deflate(cs, roots[i]);\n        }\n        var qroots = Polynomial.quadratic_roots(cs);\n        roots[n - 2] = qroots[0];\n        roots[n - 1] = qroots[1];\n    }\n    return roots; // TODO sort?\n};\n\n/**\n * @return {number}\n */\nPolynomial.prototype.sheets = function() {\n    var vars = this.variableList();\n    var vy = vars.length === 0 ? \"y\" : vars[vars.length - 1];\n    return this.degree(vy);\n};\n\n/**\n * @param {Polynomial} p\n * @param {Polynomial} q\n * @return {Polynomial}\n */\nPolynomial.sub = function(p, q) {\n    return Polynomial.add(p, q.neg());\n};\n\n/**\n * @param {Polynomial} p\n * @return {Polynomial}\n */\nPolynomial.prototype.sub = function(p) {\n    return Polynomial.sub(this, p);\n};\n\n/**\n * @param {string} v\n * @param {Polynomial} p\n * @param {Polynomial} q\n * @return {Matrix}\n */\nPolynomial.sylvester = function(v, p, q) {\n    var m = p.degree(v);\n    var n = q.degree(v);\n    var p_ = p.coefficientList(v);\n    var q_ = q.coefficientList(v);\n    var ms = [];\n\n    /**\n     * @param {number} n\n     * @return {Array<Polynomial>}\n     */\n    function zeros(n) {\n        var zs = [];\n        for (var i = 0; i < n; i++)\n            zs[i] = Polynomial.zero();\n        return zs;\n    }\n\n    /**\n     * @param {Array<Polynomial>} f\n     * @param {number} i\n     * @return {Array<Polynomial>}\n     */\n    function shift(f, i) {\n        return zeros(i).concat(f).concat(zeros(m + n - f.length - i));\n    }\n    for (var i = 0; i < n; i++)\n        ms.push(shift(p_, i));\n    for (var j = 0; j < m; j++)\n        ms.push(shift(q_, j));\n    return new Matrix(ms);\n};\n\n/** @type {Array<Term>} */\nPolynomial.prototype.terms = null;\n\n/**\n * @param {string} v\n * @return {Polynomial}\n */\nPolynomial.variable = function(v) {\n    var m = {};\n    m[v] = 1;\n    return new Polynomial([new Term(Complex.one, new Monomial(m))]);\n};\n\n/** @return {Array<string>} */\nPolynomial.prototype.variableList = function() {\n    var terms = this.terms;\n    var vars = [];\n    var hasVar = {};\n    for (var i = 0, l = terms.length; i < l; i++) {\n        var m = terms[i].monomial.value;\n        for (var key in m) {\n            if (!hasVar[key]) {\n                vars.push(key);\n                hasVar[key] = true;\n            }\n        }\n    }\n    vars.sort();\n    return vars;\n};\n\n/** @return {Polynomial} */\nPolynomial.zero = function() {\n    return new Polynomial([]);\n};\n\n/** @return {Polynomial} */\nPolynomial.prototype.zero = Polynomial.zero;\n","var Parser = {};\n\n/** @typedef {{type : string, value : string}} */\nParser.Token = null;\n\n/** @typedef {!Array<Parser.Token>} */\nParser.Tokens = null;\n\n/** @typedef {{type : string, value : string, first: Parser.AST}} */\nParser.PrefixLeaf = null;\n\n/** @typedef {{type : string, value : string, first: Parser.AST, second: Parser.AST}} */\nParser.InfixLeaf = null;\n\n/** @typedef {Parser.Token|Parser.PrefixLeaf|Parser.InfixLeaf} */\nParser.Leaf = null;\n\n/** @typedef {Parser.Leaf|Array<Parser.Leaf>|boolean|null} */\nParser.AST = null;\n\n/** @typedef {function(Parser.Tokens) : Parser.AST} */\nParser.Combinator = null;\n\n/**\n * @param {...Parser.Combinator} var_args\n * @return {Parser.Combinator}\n */\nfunction and(var_args) {\n    var args = arguments;\n    /**\n     * @param {Parser.Tokens} input\n     * @return {Array<Parser.Leaf>|null}\n     */\n    function f(input) {\n        var result, results = [];\n        for (var i = 0, l = args.length; i < l; i++) {\n            var /** Parser.Combinator */ parser = args[i];\n            result = parser(input);\n            if (result) {\n                results.push(result);\n            } else {\n                Array.prototype.unshift.apply(input, results);\n                return null;\n            }\n        }\n        return results;\n    }\n    return f;\n}\n\n/**\n * @param {Parser.Combinator} left\n * @param {Parser.Combinator} middle\n * @param {Parser.Combinator} right\n * @return {Parser.Combinator}\n */\nfunction between(left, middle, right) {\n    /**\n     * @param {Parser.Tokens} input\n     * @return {Parser.AST}\n     */\n    function f(input) {\n        var /** Parser.Combinator */ parser = and(left, middle, right);\n        var result = /** @type {Array<Parser.Leaf>|null} */ (parser(input));\n        return result ? result[1] : null;\n    }\n    return f;\n}\n\n/**\n * @param {Parser.Tokens} input\n * @return {boolean|null}\n */\nfunction eoi(input) {\n    return input.length === 0 ? true : null;\n}\n\n/**\n * @param {Parser.Combinator} op1\n * @param {Parser.Combinator} op\n * @param {Parser.Combinator} op2\n * @return {Parser.Combinator}\n */\nfunction infix(op1, op, op2) {\n    /**\n     * @param {Parser.Tokens} input\n     * @return {Parser.AST}\n     */\n    function f(input) {\n        var /** Parser.Combinator */ parser = and(op1, op, op2);\n        var result = parser(input);\n        if (result === null)\n            return null;\n        return {\n            type: \"infix\",\n            value: /** @type {Parser.Leaf} */ (result[1]).value,\n            first: result[0],\n            second: result[2]\n        };\n    }\n    return f;\n}\n\n/**\n * @param {string} type\n * @return {Parser.Combinator}\n */\nfunction literal(type) {\n    /**\n     * @param {Parser.Tokens} input\n     * @return {Parser.Token|null}\n     */\n    function f(input) {\n        return (input[0] || {}).type === type ? input.shift() : null;\n    }\n    return f;\n}\n\n/**\n * @param {Parser.Combinator} parser\n * @return {Parser.Combinator}\n */\nfunction many(parser) {\n    /**\n     * @param {Parser.Tokens} input\n     * @return {Parser.AST}\n     */\n    function f(input) {\n        var result = parser(input),\n            results = [];\n        while (result !== null) {\n            results.push(result);\n            result = parser(input);\n        }\n        return results;\n    }\n    return f;\n}\n\n/**\n * @param {...Parser.Combinator} var_args\n * @return {Parser.Combinator}\n */\nfunction or(var_args) {\n    var args = arguments;\n    /**\n     * @param {Parser.Tokens} input\n     * @return {Parser.AST}\n     */\n    function f(input) {\n        var result;\n        for (var i = 0, l = args.length; i < l; i++) {\n            var /** Parser.Combinator */ parser = args[i];\n            result = parser(input);\n            if (result)\n                return result;\n        }\n        return null;\n    }\n    return f;\n}\n\n/**\n * @param {Parser.Combinator} op\n * @return {Parser.Combinator}\n */\nfunction parenthesized(op) {\n    return between(symb(\"(\"), op, symb(\")\"));\n}\n\n/**\n * @param {Parser.Combinator} op\n * @param {Parser.Combinator} op1\n * @return {Parser.Combinator}\n */\nfunction prefix(op, op1) {\n    /**\n     * @param {Parser.Tokens} input\n     * @return {Parser.AST}\n     */\n    function f(input) {\n        var result = and(op, op1)(input);\n        if (result === null)\n            return null;\n        return {\n            type: \"prefix\",\n            value: /** @type {Parser.Leaf} */ (result[0]).value,\n            first: result[1]\n        };\n    }\n    return f;\n}\n\n/**\n * @param {string} value\n * @return {Parser.Combinator}\n */\nfunction symb(value) {\n    /**\n     * @param {Parser.Tokens} input\n     * @return {Parser.Token|null}\n     */\n    function f(input) {\n        return (input[0] || {}).value === value ? input.shift() : null;\n    }\n    return f;\n}\n","import './PolynomialParser';\n\nimport {\n    PolynomialParser\n}\nfrom './PolynomialParser';\n\nvar defaultLat = 5 / 12 * Math.PI;\nvar defaultLon = Math.PI / 6;\n\n/**\n * @param {HTMLCanvasElement} canvas\n * @param {number=} lat\n * @param {number=} lon\n * @param {boolean=} ortho\n * @param {string} contextType\n * @constructor\n */\nexport function ComplexCurves(canvas, lat = defaultLat, lon = defaultLon,\n    ortho = false, contextType = 'webgl2') {\n    this.canvas = canvas;\n    this.state3d = State3D.fromLatLong(lat, lon, ortho);\n    this.stategl = new StateGL(canvas, contextType);\n    this.registerEventHandlers();\n}\n\n/**\n * @param {HTMLCanvasElement} canvas\n * @param {string} equation\n * @param {number} depth\n * @param {number=} lat\n * @param {number=} lon\n * @param {boolean=} ortho\n * @return {ComplexCurves}\n */\nexport function ComplexCurvesFromEquation(canvas, equation, depth,\n    lat = defaultLat, lon = defaultLon, ortho = false) {\n    var p = PolynomialParser.eval(PolynomialParser.parse(equation));\n    return ComplexCurvesFromPolynomial(canvas, p, depth, lat, lon, ortho);\n}\n\n/**\n * @param {HTMLCanvasElement} canvas\n * @param {string} file\n * @param {string=} equation\n * @param {number=} lat\n * @param {number=} lon\n * @param {boolean=} ortho\n * @param {function()=} onload\n * @return {ComplexCurves}\n */\nexport function ComplexCurvesFromFile(canvas, file, equation = \"\",\n    lat = defaultLat, lon = defaultLon, ortho = false, onload = function() {}) {\n    var p = PolynomialParser.eval(PolynomialParser.parse(equation));\n    var complexCurves = new ComplexCurves(canvas, lat, lon, ortho, 'webgl');\n    var gl = complexCurves.stategl;\n    gl.renderer = new CachedSurface(gl, file, p, function() {\n        complexCurves.renderSurface();\n        onload();\n    });\n    return complexCurves;\n}\n\n/**\n * @param {HTMLCanvasElement} canvas\n * @param {Polynomial} polynomial\n * @param {number} depth\n * @param {number=} lat\n * @param {number=} lon\n * @param {boolean=} ortho\n * @return {ComplexCurves}\n */\nexport function ComplexCurvesFromPolynomial(canvas, polynomial, depth,\n    lat = defaultLat, lon = defaultLon, ortho = false) {\n    var complexCurves = new ComplexCurves(canvas, lat, lon, ortho);\n    var gl = complexCurves.stategl;\n    gl.renderer = new Surface(gl, polynomial, depth);\n    // equation must be bivariate and at least quadratic\n    if (!polynomial.isBivariate() || gl.renderer.sheets < 2)\n        return null;\n    complexCurves.renderSurface();\n    return complexCurves;\n}\n\n/**\n * @param {boolean=} big\n * @return {Array<string>} */\nComplexCurves.prototype.domainColouring = function(big = false) {\n    var gl = this.stategl;\n    return gl.renderer.domainColouring(gl, big);\n};\n\n/** @param {string=} name */\nComplexCurves.prototype.exportBinary = function(name = \"surface.bin\") {\n    var gl = this.stategl;\n    gl.renderer.exportBinary(gl, name);\n};\n\n/**\n * @param {string=} name\n * @param {boolean=} big\n */\nComplexCurves.prototype.exportDomainColouring = function(name = \"sheet\",\n    big = true) {\n    var gl = this.stategl;\n    gl.renderer.exportDomainColouring(gl, name, big);\n};\n\n/**\n * @param {string=} name\n * @param {boolean=} big\n */\nComplexCurves.prototype.exportScreenshot = function(name = \"surface.png\",\n    big = false) {\n    var complexCurves = this;\n    var stategl = this.stategl;\n    stategl.withRenderToTexture(function() {\n        complexCurves.renderSurface();\n    }, big);\n    var pixels = /** @type {Uint8Array} */\n        (stategl.readTexture(big ? stategl.rttBigTexture : stategl.rttTexture));\n    Export.download(name, Export.pixelsToImageDataURL(pixels));\n};\n\n/**\n * @param {string=} name\n * @param {boolean=} big\n */\nComplexCurves.prototype.exportSurface = function(name = \"surface\", big = true) {\n    var gl = this.stategl;\n    gl.renderer.exportSurface(gl, name, big);\n};\n\nComplexCurves.prototype.registerEventHandlers = function() {\n    var canvas = this.canvas,\n        state3d = this.state3d,\n        gl = this.stategl;\n    var complexCurves = this;\n    /** @type {function(!Event) : undefined} */\n    this.mousedownHandler = function(evt) {\n        evt.preventDefault();\n        if (state3d.autorotate)\n            return;\n        state3d.mouseDown([evt.clientX, evt.clientY]);\n        complexCurves.renderSurface();\n    };\n    /** @type {function(!Event) : undefined} */\n    this.mousemoveHandler = function(evt) {\n        evt.preventDefault();\n        state3d.mouseMove(evt.clientX, evt.clientY);\n    };\n    /** @type {function(!Event) : undefined} */\n    this.mouseupHandler = function(evt) {\n        evt.preventDefault();\n        state3d.mouseUp();\n    };\n    /** @type {function(!Event) : undefined} */\n    this.touchstartHandler = function(evt) {\n        evt.preventDefault();\n        var touch = /** @type {TouchEvent} */ (evt).touches[0];\n        state3d.mouseDown([touch.clientX, touch.clientY]);\n        complexCurves.renderSurface();\n    };\n    /** @type {function(!Event) : undefined} */\n    this.touchmoveHandler = function(evt) {\n        evt.preventDefault();\n        var touch = /** @type {TouchEvent} */ (evt).touches[0];\n        state3d.mouseMove(touch.clientX, touch.clientY);\n    };\n    /** @type {function(!Event) : undefined} */\n    this.touchendHandler = function(evt) {\n        evt.preventDefault();\n        state3d.mouseUp();\n    };\n    /** @type {function(!Event) : undefined} */\n    this.wheelHandler = function(evt) {\n        evt.preventDefault();\n        state3d.mouseWheel( /** @type {WheelEvent} */ (evt).deltaY);\n        complexCurves.renderSurface();\n    };\n    canvas.addEventListener('mousedown', this.mousedownHandler);\n    canvas.addEventListener('mousemove', this.mousemoveHandler);\n    canvas.addEventListener('mouseup', this.mouseupHandler);\n    canvas.addEventListener('touchstart', this.touchstartHandler);\n    canvas.addEventListener('touchmove', this.touchmoveHandler);\n    canvas.addEventListener('touchend', this.touchendHandler);\n    canvas.addEventListener('wheel', this.wheelHandler);\n};\n\nComplexCurves.prototype.renderSurface = function() {\n    var state3d = this.state3d,\n        gl = this.stategl;\n    var complexCurves = this;\n    gl.renderSurface(state3d);\n    if (state3d.isRotating()) {\n        state3d.updateRotation();\n        requestAnimationFrame(function() {\n            complexCurves.renderSurface();\n        });\n    }\n};\n\nComplexCurves.prototype.rotateBack = function() {\n    this.rotateLatLong(Math.PI / 2, Math.PI);\n};\n\nComplexCurves.prototype.rotateBottom = function() {\n    this.rotateLatLong(Math.PI, 0);\n};\n\nComplexCurves.prototype.rotateDefault = function() {\n    this.rotateLatLong(defaultLat, defaultLon);\n};\n\nComplexCurves.prototype.rotateFront = function() {\n    this.rotateLatLong(Math.PI / 2, 0);\n};\n\n/**\n * @param {number} lat\n * @param {number} lon\n */\nComplexCurves.prototype.rotateLatLong = function(lat, lon) {\n    this.state3d.autorotate = false;\n    this.state3d.target1 = this.state3d.target0 = this.state3d.rotation;\n    this.state3d.target1 = Quaternion.fromLatLong(lat, lon);\n    this.renderSurface();\n};\n\nComplexCurves.prototype.rotateLeft = function() {\n    this.rotateLatLong(Math.PI / 2, -Math.PI / 2);\n};\n\nComplexCurves.prototype.rotateRight = function() {\n    this.rotateLatLong(Math.PI / 2, Math.PI / 2);\n};\n\nComplexCurves.prototype.rotateTop = function() {\n    this.rotateLatLong(0, 0);\n};\n\n/** @param {boolean} fxaa */\nComplexCurves.prototype.setAntialiasing = function(fxaa) {\n    this.stategl.setAntialiasing(fxaa);\n    this.renderSurface();\n};\n\n/** @param {boolean} autorotate */\nComplexCurves.prototype.setAutorotate = function(autorotate) {\n    this.state3d.setAutorotate(autorotate);\n    this.renderSurface();\n};\n\n/**\n * @param {number} r\n * @param {number} g\n * @param {number} b\n * @param {number} a\n */\nComplexCurves.prototype.setBackground = function(r, g, b, a) {\n    this.stategl.gl.clearColor(r, g, b, a);\n    this.renderSurface();\n};\n\n/** @param {boolean} clipping */\nComplexCurves.prototype.setClipping = function(clipping) {\n    this.stategl.setClipping(clipping);\n    this.renderSurface();\n};\n\n/**\n * @param {number} lat\n * @param {number} lon\n */\nComplexCurves.prototype.setLatLong = function(lat, lon) {\n    var q = Quaternion.fromLatLong(lat, lon);\n    this.state3d.autorotate = false;\n    this.state3d.rotating = false;\n    this.state3d.rotation = this.state3d.target1 = q;\n    this.renderSurface();\n};\n\n/** @param {boolean} ortho */\nComplexCurves.prototype.setOrtho = function(ortho) {\n    this.state3d.setOrtho(ortho);\n    this.renderSurface();\n};\n\n/** @param {boolean} transparency */\nComplexCurves.prototype.setTransparency = function(transparency) {\n    this.stategl.setTransparency(transparency);\n    this.renderSurface();\n};\n\n/** @param {number} zoomLevel */\nComplexCurves.prototype.setZoom = function(zoomLevel) {\n    this.state3d.updateZoom(zoomLevel || 1);\n    this.renderSurface();\n};\n\nComplexCurves.prototype.toggleAntialiasing = function() {\n    this.stategl.toggleAntialiasing();\n    this.renderSurface();\n};\n\nComplexCurves.prototype.toggleAutorotate = function() {\n    this.state3d.toggleAutorotate();\n    this.renderSurface();\n};\n\nComplexCurves.prototype.toggleClipping = function() {\n    this.stategl.toggleClipping();\n    this.renderSurface();\n};\n\nComplexCurves.prototype.toggleOrtho = function() {\n    this.state3d.toggleOrtho();\n    this.renderSurface();\n};\n\nComplexCurves.prototype.toggleTransparency = function() {\n    this.stategl.toggleTransparency();\n    this.renderSurface();\n};\n\nComplexCurves.prototype.unregisterEventHandlers = function() {\n    var canvas = this.canvas;\n    canvas.removeEventListener('mousedown', this.mousedownHandler);\n    canvas.removeEventListener('mousemove', this.mousemoveHandler);\n    canvas.removeEventListener('mouseup', this.mouseupHandler);\n    canvas.removeEventListener('touchstart', this.touchstartHandler);\n    canvas.removeEventListener('touchmove', this.touchmoveHandler);\n    canvas.removeEventListener('touchend', this.touchendHandler);\n    canvas.removeEventListener('wheel', this.wheelHandler);\n};\n","/** @constructor */\nfunction State3D() {}\n\n/** @type {boolean} */\nState3D.prototype.autorotate = false;\n\n/** @type {Array<number>} */\nState3D.prototype.mouseCoord = [0, 0];\n\n/** @type {boolean} */\nState3D.prototype.ortho = false;\n\n/** @type {boolean} */\nState3D.prototype.rotating = false;\n\n/** @type {Quaternion} */\nState3D.prototype.rotation = Quaternion.fromLatLong(0, 0);\n\n/** @type {boolean} */\nState3D.prototype.rotationEasing = true;\n\n/** @type {Quaternion} */\nState3D.prototype.target0 = Quaternion.fromLatLong(0, 0);\n\n/** @type {Quaternion} */\nState3D.prototype.target1 = Quaternion.fromLatLong(0, 0);\n\n/** @type {boolean} */\nState3D.prototype.twoD = false;\n\n/** @type {number} */\nState3D.prototype.zoomFactor = 1;\n\n/** @return {Array<number>} */\nState3D.identityMatrix = function() {\n    return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n};\n\n/** @return {boolean} */\nState3D.prototype.isRotating = function() {\n    return this.autorotate || this.rotating ||\n        Quaternion.sub(this.rotation, this.target1).abs() > 1e-6;\n};\n\n/**\n * @param {number} theta\n * @param {number} phi\n * @param {boolean} ortho\n * @return {State3D}\n */\nState3D.fromLatLong = function(theta, phi, ortho) {\n    var q = Quaternion.fromLatLong(theta, phi),\n        st = new State3D();\n    st.ortho = ortho;\n    st.rotation = st.target0 = st.target1 = q;\n    return st;\n};\n\n/** @type {function(boolean) : State3D} */\nState3D.backView = State3D.fromLatLong.bind(null, Math.PI / 2, Math.PI);\n/** @type {function(boolean) : State3D} */\nState3D.frontView = State3D.fromLatLong.bind(null, Math.PI / 2, 0);\n/** @type {function(boolean) : State3D} */\nState3D.topView = State3D.fromLatLong.bind(null, 0, 0);\n/** @type {function(boolean) : State3D} */\nState3D.bottomView = State3D.fromLatLong.bind(null, Math.PI, 0);\n/** @type {function(boolean) : State3D} */\nState3D.leftView = State3D.fromLatLong.bind(null, Math.PI / 2, -Math.PI / 2);\n/** @type {function(boolean) : State3D} */\nState3D.rightView = State3D.fromLatLong.bind(null, Math.PI / 2, Math.PI / 2);\n/**\n * @param {number} lat\n * @param {number} lon\n * @param {boolean} ortho\n * @return {State3D}\n */\nState3D.fromLatLongDegrees = function(lat, lon, ortho) {\n    var piOver180 = Math.PI / 180;\n    return State3D.fromLatLong(lat * piOver180, lon * piOver180, ortho);\n};\n/** @return {State3D} */\nState3D.twoDimensionalView = function() {\n    var st = State3D.topView(true);\n    st.twoD = true;\n    return st;\n};\n\n/** @return {Array<number>} */\nState3D.prototype.modelMatrix = function() {\n    return this.rotation.rotationMatrix();\n};\n\n/** @param {Array<number>} xy */\nState3D.prototype.mouseDown = function(xy) {\n    if (this.autorotate)\n        return;\n    this.mouseCoord = xy;\n    this.rotating = true;\n    this.target0 = this.target1;\n};\n\n/**\n * @param {number} x\n * @param {number} y\n */\nState3D.prototype.mouseMove = function(x, y) {\n    if (!(this.rotating))\n        return;\n    var xy = this.mouseCoord,\n        xo = xy[0],\n        yo = xy[1],\n        dx = x - xo,\n        dy = yo - y,\n        dr = Math.sqrt(dx * dx + dy * dy),\n        q = this.target0,\n        r = 100,\n        cost = r / Math.sqrt(r * r + dr * dr),\n        sint = dr / Math.sqrt(r * r + dr * dr),\n        q2 = Quaternion.mul(new Quaternion(cost, -sint * dy, sint * dx, 0),\n            q);\n    this.target1 = Quaternion.nlerp(q, q2, 0.05);\n};\n\nState3D.prototype.mouseUp = function() {\n    this.mouseCoord = [0, 0];\n    this.rotating = false;\n};\n\n/** @param {number} direction */\nState3D.prototype.mouseWheel = function(direction) {\n    if (direction > 0)\n        this.zoomOut();\n    else\n        this.zoomIn();\n};\n\n/**\n * orthographic projection matrix, in column-major order\n * @param {number} width\n * @param {number} height\n * @param {number} zoom\n * @return {Array<number>}\n */\nState3D.orthographicProjectionMatrix = function(width, height, zoom) {\n    var bottom = -7.5 * zoom,\n        left = -7.5 * zoom,\n        right = 7.5 * zoom,\n        top = 7.5 * zoom,\n        zFar = 100,\n        zNear = -100,\n        s1 = Math.min(height / width, 1),\n        s2 = Math.min(width / height, 1);\n    return [s1 * 2 / (right - left), 0, 0, 0, 0, s2 * 2 / (top - bottom), 0,\n        0, 0, 0, -2 / (zFar - zNear), 0, -s1 * (right + left) / (right -\n            left), -s2 * (top + bottom) / (top - bottom), -(zFar +\n            zNear) / (zFar - zNear), 1\n    ];\n};\n\n/**\n * perspective projection matrix, in column-major order\n * @param {number} width\n * @param {number} height\n * @param {number} zoom\n * @return {Array<number>}\n */\nState3D.perspectiveProjectionMatrix = function(width, height, zoom) {\n    var zFar = 100,\n        zNear = 1,\n        aspect = height > 0 ? width / height : width;\n    var fovy = 45 * zoom,\n        f = 1 / Math.tan(fovy / 2 * Math.PI / 180);\n    return [f / aspect, 0, 0, 0, 0, f, 0, 0, 0, 0, (zFar +\n            zNear) / (zNear - zFar), -1, 0, 0, 2 * zFar *\n        zNear / (zNear - zFar), 0\n    ];\n};\n\n/**\n * @param {number} w\n * @param {number} h\n * @return {Array<number>}\n */\nState3D.prototype.projectionMatrix = function(w, h) {\n    if (this.ortho)\n        return State3D.orthographicProjectionMatrix(w, h, this.zoomFactor);\n    else if (this.twoD)\n        return State3D.identityMatrix();\n    else\n        return State3D.perspectiveProjectionMatrix(w, h, this.zoomFactor);\n};\n\n/** @param {boolean} autorotate */\nState3D.prototype.setAutorotate = function(autorotate) {\n    this.autorotate = autorotate;\n};\n\n/** @param {boolean} ortho */\nState3D.prototype.setOrtho = function(ortho) {\n    this.ortho = ortho;\n};\n\n/** @param {boolean} twoD */\nState3D.prototype.setTwoD = function(twoD) {\n    this.twoD = twoD;\n};\n\nState3D.prototype.toggleAutorotate = function() {\n    this.autorotate = !this.autorotate;\n};\n\nState3D.prototype.toggleOrtho = function() {\n    this.ortho = !this.ortho;\n};\n\nState3D.prototype.toggleTwoD = function() {\n    this.twoD = !this.twoD;\n};\n\nState3D.prototype.updateRotation = function() {\n    if (this.autorotate) {\n        var q = new Quaternion(0.01, 0, 0, 1).normalize();\n        q = Quaternion.mul(q, q);\n        this.rotation = this.target1 = Quaternion.mul(this.rotation, q);\n    } else if (this.rotationEasing) {\n        this.rotation = Quaternion.nlerp(this.rotation, this.target1, 0.1);\n    } else {\n        this.rotation = this.target1;\n    }\n};\n\n/** @param {number} z */\nState3D.prototype.updateZoom = function(z) {\n    this.zoomFactor = z;\n};\n\n/** @return {Array<number>} */\nState3D.prototype.viewMatrix = function() {\n    if (this.ortho || this.twoD)\n        return State3D.identityMatrix();\n    else\n        return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, -20, 1];\n};\n\nState3D.prototype.zoomIn = function() {\n    this.updateZoom(Math.max(0.5, this.zoomFactor - 0.1));\n};\n\nState3D.prototype.zoomOut = function() {\n    this.updateZoom(Math.min(4, this.zoomFactor + 0.1));\n};\n","/**\n * @param {HTMLCanvasElement} canvas\n * @param {string=} contextType\n * @constructor\n */\nfunction StateGL(canvas, contextType = 'webgl2') {\n    var gl;\n    this.contextType = contextType;\n    if (contextType === 'webgl') {\n        this.gl = /** @type WebGLRenderingContext */ (canvas.getContext('webgl', {\n            preserveDrawingBuffer: true\n        }));\n        gl = this.gl;\n        var hasWebGL = !!gl;\n        if (!hasWebGL) {\n            alert('WebGL not supported. Please try another browser or platform.');\n            throw new Error('WebGL not supported.');\n        }\n\n    } else {\n        this.gl = /** @type WebGLRenderingContext */ (canvas.getContext('webgl2', {\n            preserveDrawingBuffer: true\n        }));\n        gl = this.gl;\n        var hasWebGL2 = !!gl;\n        if (!hasWebGL2) {\n            alert('WebGL 2 not supported. Please try another browser or platform.');\n            throw new Error('WebGL 2 not supported.');\n        }\n    }\n    gl.enable(gl.DEPTH_TEST);\n    this.mkFXAAProgram();\n    this.mkRenderToTextureObjects();\n}\n\n/** @type {number} */\nStateGL.prototype.bigTextureSize = 8192;\n\n/** @type {boolean} */\nStateGL.prototype.clipping = false;\n\n/** @type {string} */\nStateGL.prototype.contextType = 'webgl2';\n\n/** @type {boolean} */\nStateGL.prototype.fxaa = true;\n\n/** @type {WebGLProgram} */\nStateGL.prototype.fxaaProgram = null;\n\n/** @param {string} name */\nStateGL.prototype.getExtension = function(name) {\n    if (this[name] === undefined) {\n        this[name] = this.gl.getExtension(name);\n        if (!this[name]) {\n            alert('Required extension ' + name + ' not supported.' +\n                ' Please try another browser or platform.');\n        }\n    }\n};\n\n/**\n * @param {string} shader\n * @return {string}\n */\nStateGL.getShaderSource = function(shader) {\n    return /** @type {string} */ (resources[shader]).trim();\n};\n\n/**\n * @param {string} shaderId\n * @return {Array<string>}\n */\nStateGL.getShaderSources = function(shaderId) {\n    return [\n        StateGL.getShaderSource(shaderId + '.vert'),\n        StateGL.getShaderSource(shaderId + '.frag')\n    ];\n};\n\n/** @type {WebGLRenderingContext} */\nStateGL.prototype.gl = null;\n\nStateGL.prototype.mkFXAAProgram = function() {\n    var sources = StateGL.getShaderSources(\"FXAA\");\n    this.fxaaProgram = this.mkProgram(sources);\n};\n\n/**\n * @param {Array<string>} sources\n * @param {Array<string>=} transformFeedbackVaryings\n * @return {WebGLProgram}\n */\nStateGL.prototype.mkProgram = function(sources, transformFeedbackVaryings) {\n    var gl = this.gl;\n    var vertexShaderSource = sources[0],\n        fragmentShaderSource = sources[1];\n    var vertexShader = gl.createShader(gl.VERTEX_SHADER);\n    gl.shaderSource(vertexShader, vertexShaderSource);\n    gl.compileShader(vertexShader);\n    if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS))\n        console.log(gl.getShaderInfoLog(vertexShader));\n    var shaderProgram = gl.createProgram();\n    gl.attachShader(shaderProgram, vertexShader);\n    if (sources[1]) {\n        var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n        gl.shaderSource(fragmentShader, fragmentShaderSource);\n        gl.compileShader(fragmentShader);\n        if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS))\n            console.log(gl.getShaderInfoLog(fragmentShader));\n        gl.attachShader(shaderProgram, fragmentShader);\n    }\n    if (transformFeedbackVaryings) {\n        gl[\"transformFeedbackVaryings\"](shaderProgram, transformFeedbackVaryings,\n            gl[\"INTERLEAVED_ATTRIBS\"]);\n        gl.enable(gl[\"RASTERIZER_DISCARD\"]);\n    } else if (this.contextType === 'webgl2') {\n        gl.disable(gl[\"RASTERIZER_DISCARD\"]);\n    }\n    gl.linkProgram(shaderProgram);\n    if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS))\n        console.log(gl.getProgramInfoLog(shaderProgram));\n    gl.useProgram(shaderProgram);\n    return shaderProgram;\n};\n\nStateGL.prototype.mkRenderToTextureObjects = function() {\n    var gl = this.gl;\n    var big = Math.min(gl.getParameter(gl.MAX_TEXTURE_SIZE), 8192);\n    this.bigTextureSize = big;\n\n    this.rttArrayBuffer = /** @type {WebGLBuffer} */ (gl.createBuffer());\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.rttArrayBuffer);\n    var vertices = [-1, -1, 3, -1, -1, 3];\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);\n    gl.vertexAttribPointer(0, 2, gl.FLOAT, false, 0, 0);\n    gl.enableVertexAttribArray(0);\n\n    this.rttBigFramebuffer = gl.createFramebuffer();\n    gl.bindFramebuffer(gl.FRAMEBUFFER, this.rttBigFramebuffer);\n\n    this.rttBigRenderbuffer = gl.createRenderbuffer();\n    gl.bindRenderbuffer(gl.RENDERBUFFER, this.rttBigRenderbuffer);\n    gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_COMPONENT16, big, big);\n    gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER,\n        this.rttBigRenderbuffer);\n\n    this.rttBigTexture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, this.rttBigTexture);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, big, big, 0, gl.RGBA, gl.UNSIGNED_BYTE,\n        null);\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D,\n        this.rttBigTexture, 0);\n\n    this.rttFramebuffer = gl.createFramebuffer();\n    gl.bindFramebuffer(gl.FRAMEBUFFER, this.rttFramebuffer);\n\n    this.rttRenderbuffer = gl.createRenderbuffer();\n    gl.bindRenderbuffer(gl.RENDERBUFFER, this.rttRenderbuffer);\n    gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_COMPONENT16, 2048, 2048);\n    gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER,\n        this.rttRenderbuffer);\n\n    this.rttTexture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, this.rttTexture);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 2048, 2048, 0, gl.RGBA, gl.UNSIGNED_BYTE,\n        null);\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D,\n        this.rttTexture, 0);\n\n    gl.bindTexture(gl.TEXTURE_2D, null);\n    gl.bindRenderbuffer(gl.RENDERBUFFER, null);\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\n};\n\n/** @type {Polynomial} */\nStateGL.prototype.polynomial = null;\n\n/**\n * @param {WebGLTexture} texture\n * @param {number} length\n * @param {number=} offset\n * @suppress {checkTypes}\n */\nStateGL.prototype.printTexture = function(texture, length, offset = 0) {\n    console.log(JSON.stringify(Array.from(this.readTexture(texture, length, offset))));\n};\n\n/**\n * @param {WebGLTexture} texture\n * @param {number=} length\n * @param {number=} offset\n * @return {Float32Array|Uint8Array|null}\n */\nStateGL.prototype.readTexture = function(texture, length, offset = 0) {\n    var gl = this.gl;\n    var framebuffer = /** @type {WebGLFramebuffer} */\n        (gl.getParameter(gl.FRAMEBUFFER_BINDING));\n    var readBuffer = gl.createFramebuffer();\n    gl.bindFramebuffer(gl.FRAMEBUFFER, readBuffer);\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D,\n        texture, 0);\n    var complete = gl.checkFramebufferStatus(gl.FRAMEBUFFER);\n    if (complete !== gl.FRAMEBUFFER_COMPLETE) {\n        gl.bindTexture(gl.TEXTURE_2D, null);\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0,\n            gl.TEXTURE_2D, null, 0);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n        gl.deleteFramebuffer(readBuffer);\n        return null;\n    }\n    var pixels;\n    if (texture === this.rttTexture) {\n        pixels = new Uint8Array(4 * 2048 * 2048);\n        gl.getError();\n        gl.readPixels(0, 0, 2048, 2048, gl.RGBA, gl.UNSIGNED_BYTE, pixels);\n    } else if (texture === this.rttBigTexture) {\n        var bigTextureSize = this.bigTextureSize;\n        pixels = new Uint8Array(4 * bigTextureSize * bigTextureSize);\n        gl.getError();\n        gl.readPixels(0, 0, bigTextureSize, bigTextureSize, gl.RGBA,\n            gl.UNSIGNED_BYTE, pixels);\n    } else {\n        pixels = new Float32Array(4 * 2048 * 2048);\n        gl.getError();\n        gl.readPixels(0, 0, 2048, 2048, gl.RGBA, gl.FLOAT, pixels);\n    }\n    var err = gl.getError();\n    gl.bindTexture(gl.TEXTURE_2D, null);\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D,\n        null, 0);\n    gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n    gl.deleteFramebuffer(readBuffer);\n    if (err !== gl.NO_ERROR)\n        return null;\n    if (length) {\n        return pixels.subarray(offset, offset + length);\n    } else {\n        return pixels;\n    }\n};\n\n/** @type {CachedSurface|Surface} */\nStateGL.prototype.renderer = null;\n\n/** @param {State3D} st */\nStateGL.prototype.renderSurface = function(st) {\n    var gl = this.gl;\n    var stategl = this;\n    this.withOptionalFXAA(function() {\n        stategl.renderer.render(stategl, gl, st);\n    });\n};\n\n/** @type {WebGLBuffer} */\nStateGL.prototype.rttArrayBuffer = null;\n\n/** @type {WebGLFramebuffer} */\nStateGL.prototype.rttBigFramebuffer = null;\n\n/** @type {WebGLRenderbuffer} */\nStateGL.prototype.rttBigRenderbuffer = null;\n\n/** @type {WebGLTexture} */\nStateGL.prototype.rttBigTexture = null;\n\n/** @type {WebGLFramebuffer} */\nStateGL.prototype.rttFramebuffer = null;\n\n/** @type {WebGLRenderbuffer} */\nStateGL.prototype.rttRenderbuffer = null;\n\n/** @type {WebGLTexture} */\nStateGL.prototype.rttTexture = null;\n\n/** @param {boolean} fxaa */\nStateGL.prototype.setAntialiasing = function(fxaa) {\n    this.fxaa = fxaa;\n};\n\n/** @param {boolean} clipping */\nStateGL.prototype.setClipping = function(clipping) {\n    this.clipping = clipping;\n};\n\n/** @param {boolean} transparency */\nStateGL.prototype.setTransparency = function(transparency) {\n    this.transparency = transparency;\n};\n\n/**\n * @param {WebGLTexture} texture\n * @param {number=} length\n * @return {string}\n */\nStateGL.prototype.textureToURL = function(texture, length) {\n    var pixels = this.readTexture(texture, length);\n    return Export.pixelsToObjectURL(pixels);\n};\n\nStateGL.prototype.toggleAntialiasing = function() {\n    this.fxaa = !this.fxaa;\n};\n\nStateGL.prototype.toggleClipping = function() {\n    this.clipping = !this.clipping;\n};\n\nStateGL.prototype.toggleTransparency = function() {\n    this.transparency = !this.transparency;\n};\n\n/** @type {boolean} */\nStateGL.prototype.transparency = false;\n\nStateGL.prototype.updateClipping = function() {\n    var gl = this.gl;\n    var program = /** @type {WebGLProgram|null} */ (gl.getParameter(gl.CURRENT_PROGRAM));\n    var loc = gl.getUniformLocation(program, \"clipping\");\n    gl.uniform1f(loc, this.clipping ? 1 : 0);\n};\n\n/** @param {State3D} st */\nStateGL.prototype.updateModelMatrix = function(st) {\n    this.updateUniformMatrix(\"m\", st.modelMatrix());\n};\n\n/** @param {State3D} st */\nStateGL.prototype.updateModelViewProjectionMatrices = function(st) {\n    this.updateModelMatrix(st);\n    this.updateViewMatrix(st);\n    this.updateProjectionMatrix(st);\n};\n\n/** @param {State3D} st */\nStateGL.prototype.updateProjectionMatrix = function(st) {\n    var gl = this.gl;\n    var vp = gl.getParameter(gl.VIEWPORT);\n    var w = /** @type {number} */ (vp[2]);\n    var h = /** @type {number} */ (vp[3]);\n    this.updateUniformMatrix(\"p\", st.projectionMatrix(w, h));\n};\n\n/** @param {boolean=} transparency */\nStateGL.prototype.updateTransparency = function(transparency) {\n    var gl = this.gl;\n    if (this.transparency && transparency !== false) {\n        gl.blendFunc(gl.SRC_ALPHA, gl.ONE);\n        gl.enable(gl.BLEND);\n        gl.disable(gl.DEPTH_TEST);\n    } else {\n        gl.disable(gl.BLEND);\n        gl.enable(gl.DEPTH_TEST);\n        gl.depthFunc(gl.LESS);\n    }\n};\n\n/**\n * @param {string} i\n * @param {Array<number>} ms\n */\nStateGL.prototype.updateUniformMatrix = function(i, ms) {\n    var gl = this.gl;\n    var program = /** @type {WebGLProgram|null} */ (gl.getParameter(gl.CURRENT_PROGRAM));\n    var loc = gl.getUniformLocation(program, i);\n    gl.uniformMatrix4fv(loc, false, ms);\n};\n\n/** @param {State3D} st */\nStateGL.prototype.updateViewMatrix = function(st) {\n    this.updateUniformMatrix(\"v\", st.viewMatrix());\n};\n\n/** @param {function()} action */\nStateGL.prototype.withFXAA = function(action) {\n    if (this.fxaaProgram === null)\n        return;\n    this.withRenderToTexture(action);\n    var gl = this.gl;\n    var program = this.fxaaProgram;\n    gl.useProgram(program);\n    var loc = gl.getUniformLocation(program, \"width\");\n    gl.uniform1f(loc, gl.canvas.width);\n    loc = gl.getUniformLocation(program, \"height\");\n    gl.uniform1f(loc, gl.canvas.height);\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.rttArrayBuffer);\n    gl.vertexAttribPointer(0, 2, gl.FLOAT, false, 0, 0);\n    gl.activeTexture(gl.TEXTURE0);\n    gl.bindTexture(gl.TEXTURE_2D, this.rttTexture);\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n    gl.drawArrays(gl.TRIANGLES, 0, 3);\n};\n\n/** @param {function()} action */\nStateGL.prototype.withOptionalFXAA = function(action) {\n    if (this.fxaa && this.fxaaProgram !== null)\n        this.withFXAA(action);\n    else\n        action();\n};\n\n/**\n * @param {function()} action\n * @param {boolean=} big\n */\nStateGL.prototype.withRenderToTexture = function(action, big = false) {\n    var gl = this.gl;\n    if (big) {\n        var bigTextureSize = this.bigTextureSize;\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.rttBigFramebuffer);\n        gl.viewport(0, 0, bigTextureSize, bigTextureSize);\n    } else {\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.rttFramebuffer);\n        gl.viewport(0, 0, 2048, 2048);\n    }\n    action();\n    gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n};\n","import './ComplexCurves';\nimport './PolynomialParser';\n\nimport {\n    ComplexCurves,\n    ComplexCurvesFromEquation,\n    ComplexCurvesFromFile,\n    ComplexCurvesFromPolynomial\n}\nfrom './ComplexCurves';\n\nimport {\n    PolynomialParser\n}\nfrom './PolynomialParser';\n\nwindow['ComplexCurves'] = ComplexCurves;\nComplexCurves['fromEquation'] = ComplexCurvesFromEquation;\nComplexCurves['fromFile'] = ComplexCurvesFromFile;\nComplexCurves['fromPolynomial'] = ComplexCurvesFromPolynomial;\nComplexCurves.prototype['domainColouring'] = ComplexCurves.prototype.domainColouring;\nComplexCurves.prototype['exportBinary'] = ComplexCurves.prototype.exportBinary;\nComplexCurves.prototype['exportDomainColouring'] = ComplexCurves.prototype.exportDomainColouring;\nComplexCurves.prototype['exportScreenshot'] = ComplexCurves.prototype.exportScreenshot;\nComplexCurves.prototype['exportSurface'] = ComplexCurves.prototype.exportSurface;\nComplexCurves.prototype['rotateBack'] = ComplexCurves.prototype.rotateBack;\nComplexCurves.prototype['rotateBottom'] = ComplexCurves.prototype.rotateBottom;\nComplexCurves.prototype['rotateDefault'] = ComplexCurves.prototype.rotateDefault;\nComplexCurves.prototype['rotateFront'] = ComplexCurves.prototype.rotateFront;\nComplexCurves.prototype['rotateLatLong'] = ComplexCurves.prototype.rotateLatLong;\nComplexCurves.prototype['rotateLeft'] = ComplexCurves.prototype.rotateLeft;\nComplexCurves.prototype['rotateRight'] = ComplexCurves.prototype.rotateRight;\nComplexCurves.prototype['rotateTop'] = ComplexCurves.prototype.rotateTop;\nComplexCurves.prototype['setAntialiasing'] = ComplexCurves.prototype.setAntialiasing;\nComplexCurves.prototype['setAutorotate'] = ComplexCurves.prototype.setAutorotate;\nComplexCurves.prototype['setBackground'] = ComplexCurves.prototype.setBackground;\nComplexCurves.prototype['setClipping'] = ComplexCurves.prototype.setClipping;\nComplexCurves.prototype['setLatLong'] = ComplexCurves.prototype.setLatLong;\nComplexCurves.prototype['setOrtho'] = ComplexCurves.prototype.setOrtho;\nComplexCurves.prototype['setTransparency'] = ComplexCurves.prototype.setTransparency;\nComplexCurves.prototype['setZoom'] = ComplexCurves.prototype.setZoom;\nComplexCurves.prototype['toggleAntialiasing'] = ComplexCurves.prototype.toggleAntialiasing;\nComplexCurves.prototype['toggleAutorotate'] = ComplexCurves.prototype.toggleAutorotate;\nComplexCurves.prototype['toggleClipping'] = ComplexCurves.prototype.toggleClipping;\nComplexCurves.prototype['toggleOrtho'] = ComplexCurves.prototype.toggleOrtho;\nComplexCurves.prototype['toggleTransparency'] = ComplexCurves.prototype.toggleTransparency;\nComplexCurves.prototype['unregisterEventHandlers'] = ComplexCurves.prototype.unregisterEventHandlers;\n\nwindow['PolynomialParser'] = PolynomialParser;\nPolynomialParser['eval'] = PolynomialParser.eval;\nPolynomialParser['isBivariate'] = PolynomialParser.isBivariate;\nPolynomialParser['parse'] = PolynomialParser.parse;\nPolynomialParser['sheets'] = PolynomialParser.sheets;\n","/**\n * @constructor\n * @param {StateGL} stategl\n * @param {Surface} surface\n * @implements {Stage}\n */\nfunction Assembly(stategl, surface) {\n    this.mkProgram(stategl, surface);\n}\n\n/**\n * @param {StateGL} stategl\n * @param {Surface} surface\n */\nAssembly.prototype.mkProgram = function(stategl, surface) {\n    var sources = [\n        StateGL.getShaderSource('Assembly.vert'),\n        StateGL.getShaderSource('Dummy.frag')\n    ];\n    sources[0] = surface.withCustomAndCommon(sources[0]);\n    this.program = stategl.mkProgram(sources, [\"posValue\"]);\n};\n\n/** @type {WebGLProgram} */\nAssembly.prototype.program = null;\n\n/**\n * @param {StateGL} stategl\n * @param {Surface} surface\n * @param {WebGLRenderingContext} gl\n */\nAssembly.prototype.render = function(stategl, surface, gl) {\n    var textures = surface.textures;\n    gl.useProgram(this.program);\n\n    var numIndicesLoc = gl.getUniformLocation(this.program, 'numIndices');\n    var numIndices = surface.numIndices;\n    gl.uniform1f(numIndicesLoc, numIndices);\n\n    surface.fillIndexBuffer(stategl);\n    gl.vertexAttribPointer(0, 1, gl.FLOAT, false, 0, 0);\n\n    var sheets = surface.sheets;\n    var stride = 4;\n    var size = stride * numIndices * sheets;\n\n    // prepare input textures\n    var texIs = [];\n    for (var i = 0, l = textures.length; i < l; i++) {\n        gl.activeTexture(gl.TEXTURE0 + i);\n        gl.bindTexture(gl.TEXTURE_2D, textures[i]);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        texIs[i] = i;\n    }\n    var samplersLocation = gl.getUniformLocation(this.program, 'samplers');\n    gl.uniform1iv(samplersLocation, texIs);\n    gl.disable(gl.DEPTH_TEST);\n\n    var sheetLoc = gl.getUniformLocation(this.program, 'sheet');\n    TransformFeedback.withTransformFeedback(gl, surface, size, function() {\n        for (var sheet = 0; sheet < sheets; sheet++) {\n            gl.uniform1f(sheetLoc, sheet);\n            gl.drawArrays(gl.TRIANGLES, 0, numIndices);\n        }\n    });\n\n    surface.numIndices *= sheets;\n    gl.enable(gl.DEPTH_TEST);\n};\n","/**\n * @constructor\n * @param {StateGL} stategl\n * @param {string} file\n * @param {Polynomial=} p\n * @param {function()} onload\n * @implements {Stage}\n */\nfunction CachedSurface(stategl, file, p = null, onload = function() {}) {\n    var cachedSurface = this;\n    cachedSurface.polynomial = p;\n    cachedSurface.loadModel(stategl, file, function() {\n        cachedSurface.mkBuffer(stategl, cachedSurface.positions);\n        cachedSurface.mkProgram(stategl);\n        onload();\n    });\n}\n\n/**\n * @param {StateGL} stategl\n * @param {boolean=} big\n * @return {Array<string>}\n */\nCachedSurface.prototype.domainColouring = function(stategl, big = false) {\n    if (this.polynomial)\n        return Export.domainColouring(this.polynomial, stategl, big);\n    else\n        return [];\n};\n\n/**\n * @param {StateGL} stategl\n * @param {string=} name\n */\nCachedSurface.prototype.exportBinary = function(stategl, name = \"surface.bin\") {\n    Export.download(name, this.file);\n};\n\n/**\n * @param {StateGL} stategl\n * @param {string} name\n * @param {boolean=} big\n */\nCachedSurface.prototype.exportDomainColouring = function(stategl, name = \"sheet\", big = true) {\n    if (this.polynomial)\n        Export.exportDomainColouring(this.polynomial, stategl, name, big);\n};\n\n/**\n * @param {StateGL} stategl\n * @param {string=} name\n * @param {boolean=} big\n */\nCachedSurface.prototype.exportSurface = function(stategl, name = \"surface\", big = true) {\n    Export.exportSurface(stategl, new Float32Array(this.positions), name, big);\n};\n\n/** @type {string} */\nCachedSurface.prototype.file = \"\";\n\n/**\n * @param {StateGL} stategl\n * @param {string} file\n * @param {function()} onload\n */\nCachedSurface.prototype.loadModel = function(stategl, file, onload) {\n    var cachedSurface = this;\n    cachedSurface.file = file;\n    var req = new XMLHttpRequest();\n    req.open(\"GET\", file, true);\n    req.responseType = \"arraybuffer\";\n    req.onload = function() {\n        cachedSurface.positions = /** @type {ArrayBuffer|null} */ (req.response);\n        onload();\n    };\n    req.send();\n};\n\n/**\n * @param {StateGL} stategl\n * @param {ArrayBuffer} positions\n */\nCachedSurface.prototype.mkBuffer = function(stategl, positions) {\n    var gl = stategl.gl;\n    this.size = positions.byteLength / 16;\n    gl.enableVertexAttribArray(0);\n    this.positionsBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.positionsBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(positions), gl.STATIC_DRAW);\n};\n\n/** @param {StateGL} stategl */\nCachedSurface.prototype.mkProgram = function(stategl) {\n    var sources = StateGL.getShaderSources(\"CachedSurface\");\n    this.program = stategl.mkProgram(sources);\n};\n\n/** @type {Polynomial} */\nCachedSurface.prototype.polynomial = null;\n\n/** @type {ArrayBuffer} */\nCachedSurface.prototype.positions = null;\n\n/** @type {WebGLBuffer} */\nCachedSurface.prototype.positionsBuffer = null;\n\n/** @type {WebGLProgram} */\nCachedSurface.prototype.program = null;\n\n/**\n * @param {StateGL} stategl\n * @param {WebGLRenderingContext} gl\n * @param {State3D} state3d\n */\nCachedSurface.prototype.render = function(stategl, gl, state3d) {\n    if (!this.program)\n        return;\n    gl.useProgram(this.program);\n    stategl.updateClipping();\n    stategl.updateModelViewProjectionMatrices(state3d);\n    stategl.updateTransparency();\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.positionsBuffer);\n    gl.vertexAttribPointer(0, 4, gl.FLOAT, false, 0, 0);\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n    gl.drawArrays(gl.TRIANGLES, 0, this.size);\n    stategl.updateTransparency(false);\n};\n\n/** @type {number} */\nCachedSurface.prototype.size = 0;\n","/**\n * @param {number} re\n * @param {number} im\n * @constructor\n */\nfunction Complex(re, im) {\n    this.re = re;\n    this.im = im;\n}\n\n/** @return {number} */\nComplex.prototype.abs = function() {\n    return Math.sqrt(this.abs2());\n};\n\n/** @return {number} */\nComplex.prototype.abs2 = function() {\n    return this.re * this.re + this.im * this.im;\n};\n\n/**\n * @param {Complex} a\n * @param {Complex} b\n * @return {Complex}\n */\nComplex.add = function(a, b) {\n    return new Complex(a.re + b.re, a.im + b.im);\n};\n\n/**\n * @param {Complex} b\n * @return {Complex}\n */\nComplex.prototype.add = function(b) {\n    return Complex.add(this, b);\n};\n\n/**\n * @param {Complex} a\n * @param {Complex} b\n * @return {Complex}\n */\nComplex.div = function(a, b) {\n    var abs2 = b.abs2();\n    var re = a.re * b.re + a.im * b.im;\n    var im = a.im * b.re - a.re * b.im;\n    return new Complex(re / abs2, im / abs2);\n};\n\n/** @type {number} */\nComplex.prototype.im = 0;\n\n/** @type {Complex} */\nComplex.infinity = new Complex(Infinity, Infinity);\n\n/**\n * @param {Complex} z\n * @return {Complex}\n */\nComplex.inv = function(z) {\n    var abs2 = z.abs2();\n    return new Complex(z.re / abs2, -z.im / abs2);\n};\n\n/**\n * @param {Complex} z\n *  @return {boolean}\n */\nComplex.isZero = function(z) {\n    return z.re === 0 && z.im === 0;\n};\n\n/**\n * @param {Complex} a\n * @param {Complex} b\n * @return {Complex}\n */\nComplex.mul = function(a, b) {\n    return new Complex(a.re * b.re - a.im * b.im, a.re * b.im + a.im * b.re);\n};\n\n/**\n * @param {Complex} b\n * @return {Complex}\n */\nComplex.prototype.mul = function(b) {\n    return Complex.mul(this, b);\n};\n\n/** @return {Complex} */\nComplex.prototype.neg = function() {\n    return new Complex(-this.re, -this.im);\n};\n\n/** @type {Complex} */\nComplex.one = new Complex(1, 0);\n\n/** @type {number} */\nComplex.prototype.re = 0;\n\n/**\n * @param {number} re\n * @return {Complex}\n */\nComplex.real = function(re) {\n    return new Complex(re, 0);\n};\n\n/**\n * @param {Complex} z\n * @return {Complex}\n */\nComplex.sqrt = function(z) {\n    if (Complex.isZero(z))\n        return Complex.zero();\n    var r = z.abs();\n    var s = Math.sign(z.im) || 1;\n    return new Complex(Math.sqrt((r + z.re) * 0.5), s * Math.sqrt((r - z.re) *\n        0.5));\n};\n\n/**\n * @param {Complex} a\n * @param {Complex} b\n * @return {Complex}\n */\nComplex.sub = function(a, b) {\n    return new Complex(a.re - b.re, a.im - b.im);\n};\n\n/** @return {Complex} */\nComplex.zero = function() {\n    return new Complex(0, 0);\n};\n\n/** @return {Complex} */\nComplex.prototype.zero = Complex.zero;\n","var Export = {};\n\n/**\n * @param {Polynomial} p\n * @param {StateGL} stategl\n * @param {boolean=} big\n * @return {Array<string>}\n */\nExport.domainColouring = function(p, stategl, big = false) {\n    var gl = stategl.gl;\n    var sources = StateGL.getShaderSources(\"DomainColouring\");\n    var customShaderSrc = GLSL.polynomialShaderSource(p);\n    var commonShaderSrc = /** @type {string} */ (resources[\"Common.glsl\"]);\n    sources[1] = [customShaderSrc, commonShaderSrc, sources[1]].join(\"\\n\");\n    var program = stategl.mkProgram(sources);\n    var loc;\n    var vars = p.variableList();\n    var vy = vars.length === 0 ? \"y\" : vars[vars.length - 1];\n    var numSheets = p.degree(vy);\n    var sheets = [];\n    var pixels;\n\n    /** @param {number} sheet */\n    function renderSheet(sheet) {\n        gl.useProgram(program);\n        gl.bindBuffer(gl.ARRAY_BUFFER, stategl.rttArrayBuffer);\n        gl.vertexAttribPointer(0, 2, gl.FLOAT, false, 0, 0);\n        loc = gl.getUniformLocation(program, \"sheet\");\n        gl.uniform1i(loc, sheet);\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n        gl.drawArrays(gl.TRIANGLES, 0, 3);\n    }\n    for (var sheet = 1; sheet <= numSheets; sheet++) {\n        stategl.withRenderToTexture(renderSheet.bind(null, sheet), big);\n        var texture = big ? stategl.rttBigTexture : stategl.rttTexture;\n        pixels = /** @type {Uint8Array} */\n            (stategl.readTexture(texture));\n        sheets[sheet - 1] = Export.pixelsToImageDataURL(pixels);\n    }\n    return sheets;\n};\n\n/**\n * @param {string} name\n * @param {string} url\n */\nExport.download = function(name, url) {\n    var link = document.createElement(\"a\");\n    link.href = url;\n    link.download = name;\n    link.style.display = \"none\";\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n};\n\n/**\n * @param {Polynomial} p\n * @param {StateGL} stategl\n * @param {string=} name\n * @param {boolean=} big\n */\nExport.exportDomainColouring = function(p, stategl, name = \"sheet\", big = true) {\n    var sheets = Export.domainColouring(p, stategl, big);\n    for (var i = 0, l = sheets.length; i < l; i++)\n        Export.download(name + (i + 1) + \".png\", sheets[i]);\n};\n\n/**\n * @param {StateGL} stategl\n * @param {Float32Array} pixels\n * @param {string=} name\n * @param {boolean=} big\n */\nExport.exportSurface = function(stategl, pixels, name = \"surface\", big = true) {\n    // FIXME much too slow\n    var d, i, j, k, u, v, x, y, z, w;\n    var length, indices, maxValue = -Infinity,\n        minValue = Infinity;\n    length = pixels.byteLength / pixels.BYTES_PER_ELEMENT / 4;\n    var /** Array<Array<number>> */ vertices = [];\n    for (i = 0; i < length * 4; i += 4) {\n        x = pixels[i];\n        y = pixels[i + 1];\n        z = pixels[i + 2];\n        w = pixels[i + 3];\n        vertices.push([x, y, z]);\n        minValue = Math.min(minValue, Math.min(z, w));\n        maxValue = Math.max(maxValue, Math.max(z, w));\n    }\n    d = maxValue - minValue;\n    var /** Array<Array<number>> */ uvs = [];\n    for (i = 2; i < length * 4; i += 4) {\n        u = (pixels[i] - minValue) / d;\n        v = (pixels[i + 1] - minValue) / d;\n        uvs.push([u, v]);\n    }\n    var /** Array<Array<number>> */ faces = [];\n    for (i = 1; i <= length; i += 3) {\n        j = i + 1;\n        k = i + 2;\n        faces.push([i, j, k]);\n    }\n\n    /* deduplicate mesh data */\n    indices = vertices.map(function(v1, i) {\n        var uv1 = uvs[i];\n        return vertices.findIndex(function(v2, j) {\n            var uv2 = uvs[j];\n            return v1[0] === v2[0] && v1[1] === v2[1] && v1[2] === v2[2] &&\n                uv1[0] === uv2[0] && uv1[1] === uv2[1];\n        });\n    });\n    var /** @type {Array<number>} */ indices2 = Array.from(new Set(indices));\n    vertices = indices2.map(function(ii) {\n        return vertices[ii];\n    });\n    uvs = indices2.map(function(i) {\n        return uvs[i];\n    });\n    faces = faces.map(function(f) {\n        return f.map(function(i) {\n            return indices2.findIndex(function(j) {\n                return j === indices[i - 1];\n            }) + 1;\n        });\n    });\n\n    var vertexStrings = vertices.map( /** @param {Array<number>} v */ function(v) {\n        return \"v \" + v[0] + \" \" + v[1] + \" \" + v[2];\n    });\n    var uvStrings = uvs.map( /** @param {Array<number>} uv */ function(uv) {\n        return \"vt \" + uv[0] + \" \" + uv[1];\n    });\n    var faceStrings = faces.map( /** @param {Array<number>} f */ function(f) {\n        var i = f[0],\n            j = f[1],\n            k = f[2];\n        return \"f \" + i + \"/\" + i + \" \" + j + \"/\" + j + \" \" + k + \"/\" + k;\n    });\n\n    var obj = [\"mtllib \" + name + \".mtl\", \"usemtl surface\", \"s 1\"];\n    obj = obj.concat(vertexStrings, uvStrings, faceStrings);\n    obj = \"data:text/plain,\" + encodeURIComponent(obj.join(\"\\n\"));\n    Export.download(name + \".obj\", obj);\n\n    var gl = stategl.gl;\n    var sources = StateGL.getShaderSources(\"Export\");\n    var program = stategl.mkProgram(sources);\n    var loc;\n    stategl.withRenderToTexture(function() {\n        gl.useProgram(program);\n        gl.bindBuffer(gl.ARRAY_BUFFER, stategl.rttArrayBuffer);\n        gl.vertexAttribPointer(0, 2, gl.FLOAT, false, 0, 0);\n        loc = gl.getUniformLocation(program, \"minValue\");\n        gl.uniform1f(loc, minValue);\n        loc = gl.getUniformLocation(program, \"maxValue\");\n        gl.uniform1f(loc, maxValue);\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n        gl.drawArrays(gl.TRIANGLES, 0, 3);\n    }, big);\n    var texels = /** @type {Uint8Array} */\n        (stategl.readTexture(big ? stategl.rttBigTexture : stategl.rttTexture));\n    Export.download(name + \".png\", Export.pixelsToImageDataURL(texels));\n\n    var mtl = [\"newmtl surface\", \"map_Kd \" + name + \".png\", \"illum 0\"];\n    mtl = \"data:text/plain,\" + encodeURIComponent(mtl.join(\"\\n\"));\n    Export.download(name + \".mtl\", mtl);\n};\n\n/**\n * @param {Uint8Array} pixels\n * @return {string}\n */\nExport.pixelsToImageDataURL = function(pixels) {\n    var size = Math.sqrt(pixels.length / 4);\n    var canvas =\n        /** @type {HTMLCanvasElement} */\n        (document.createElement(\"canvas\"));\n    canvas.width = size;\n    canvas.height = size;\n    var context =\n        /** @type {CanvasRenderingContext2D} */\n        (canvas.getContext(\"2d\"));\n    var imageData = context.createImageData(canvas.width, canvas.height);\n    imageData.data.set(pixels);\n    context.putImageData(imageData, 0, 0);\n    var canvasFlip =\n        /** @type {HTMLCanvasElement} */\n        (document.createElement(\"canvas\"));\n    canvasFlip.width = size;\n    canvasFlip.height = size;\n    var contextFlip =\n        /** @type {CanvasRenderingContext2D} */\n        (canvasFlip.getContext(\"2d\"));\n    contextFlip.translate(0, canvasFlip.height - 1);\n    contextFlip.scale(1, -1);\n    contextFlip.drawImage(canvas, 0, 0);\n    return canvasFlip.toDataURL();\n};\n\n/**\n * @param {Uint8Array|Float32Array} pixels\n * @return {string}\n */\nExport.pixelsToObjectURL = function(pixels) {\n    return URL.createObjectURL(new Blob([pixels], {\n        type: \"application/octet-binary\"\n    }));\n};\n","var GLSL = {};\n\n/**\n * @param {Polynomial} p\n * @return {Array<string>}\n */\nGLSL.glslCoefficients = function(p) {\n    var cs = [],\n        cs_, i, l;\n    if (p.isConstant())\n        return [GLSL.glslComplex(p.constant())];\n    else if (p.isUnivariate()) {\n        cs_ = p.coefficientList_();\n        for (i = 0, l = cs_.length; i < l; i++)\n            cs[i] = GLSL.glslComplex(cs_[i]);\n    } else if (p.isBivariate()) {\n        var vars = p.variableList();\n        var vx = vars[0],\n            vy = vars[1];\n        cs_ = p.coefficientList(vy);\n        for (i = 0, l = cs_.length; i < l; i++)\n            cs[i] = GLSL.glslHorner(vx, GLSL.glslCoefficients(cs_[i]));\n    }\n    return cs;\n};\n\n/**\n * @param {Complex} z\n * @return {string}\n */\nGLSL.glslComplex = function(z) {\n    return \"vec2 (\" + z.re.toPrecision(8) + \", \" + z.im.toPrecision(8) +\n        \")\";\n};\n\n/**\n * @param {Polynomial} p\n * @param {string} vx\n * @param {string} vy\n * @return {string}\n */\nGLSL.glslF = function(p, vx, vy) {\n    var cs = GLSL.pad(GLSL.glslCoefficients(p).reverse());\n    var lines = [\"void f (in vec2 \" + vx + \", out vec2 cs[N+1])\", \"{\"];\n    for (var i = 0; i <= GLSL.N; i++)\n        lines.push(\"cs[\" + i + \"] = \" + cs[i] + \";\");\n    lines.push(\"}\");\n    return lines.join(\"\\n\");\n};\n\n/**\n * @param {Polynomial} p\n * @param {string} vx\n * @param {string} vy\n * @return {string}\n */\nGLSL.glslFx = function(p, vx, vy) {\n    var cs = p.diff(vx).coefficientList(vy);\n    var cs_ = [];\n    for (var i = 0, l = cs.length; i < l; i++)\n        cs_[i] = GLSL.glslHorner(vx, GLSL.glslCoefficients(cs[i]));\n    var lines = [\"vec2 fx (in vec2 \" + vx + \", in vec2 \" + vy + \")\", \"{\",\n        \"    return \" + GLSL.glslHorner(vy, cs_) + \";\", \"}\"\n    ];\n    return lines.join(\"\\n\");\n};\n\n/**\n * @param {Polynomial} p\n * @param {string} vx\n * @param {string} vy\n * @return {string}\n */\nGLSL.glslFy = function(p, vx, vy) {\n    var cs = p.diff(vy).coefficientList(vx);\n    var cs_ = [];\n    for (var i = 0, l = cs.length; i < l; i++)\n        cs_[i] = GLSL.glslHorner(vy, GLSL.glslCoefficients(cs[i]));\n    var lines = [\"vec2 fy (in vec2 \" + vx + \", in vec2 \" + vy + \")\", \"{\",\n        \"    return \" + GLSL.glslHorner(vx, cs_) + \";\", \"}\"\n    ];\n    return lines.join(\"\\n\");\n};\n\n/**\n * @param {Polynomial} p\n * @param {string} vy\n * @return {string}\n */\nGLSL.glslHeader = function(p, vx, vy) {\n    var lines = [\n        \"#ifdef GL_FRAGMENT_PRECISION_HIGH\",\n        \"precision highp float;\",\n        \"#else\", \"precision mediump float;\", \"#endif\",\n        \"const int N = \" + GLSL.N + \";\",\n        \"const int sheets = \" + p.degree(vy) + \";\", \"\",\n        \"/* complex multiplication */\",\n        \"vec2 cm (in vec2 a, in vec2 b)\", \"{\",\n        \"    return vec2 (a.x * b.x - a.y * b.y, a.x * b.y + a.y * b.x);\",\n        \"}\"\n    ];\n    return lines.join(\"\\n\");\n};\n\n/**\n * @param {string} v\n * @param {Array<string>} cs\n * @return {string}\n */\nGLSL.glslHorner = function(v, cs) {\n    var str = cs[0];\n    for (var i = 1, l = cs.length; i < l; i++) {\n        if (str === \"vec2 (1.0000000, 0.0000000)\")\n            str = v;\n        else if (str === \"vec2 (-1.0000000, 0.0000000)\")\n            str = \"-\" + v;\n        else\n            str = \"cm (\" + v + \",\" + str + \")\";\n        if (cs[i] !== \"vec2 (0.0000000, 0.0000000)\")\n            str += \"+\" + cs[i];\n    }\n    return str;\n};\n\n/**\n * @param {Polynomial} p\n * @param {string} vx\n * @param {string} vy\n * @return {string}\n */\nGLSL.glslM = function(p, vx, vy) {\n    var i, j, l, k;\n    var cs = p.coefficientList(vy);\n    for (i = 0, l = cs.length; i < l; i++) {\n        var terms = cs[i].terms;\n        for (j = 0, k = terms.length; j < k; j++) {\n            var term = terms[j];\n            terms[j] = new Term(Complex.real(term.coefficient.abs()),\n                term.monomial);\n        }\n        cs[i] = new Polynomial(terms);\n    }\n    var a0a0 = cs[0].leading(vx);\n    var an = p.leading(vy);\n    var leadRoots = Polynomial.roots(an.coefficientList_());\n    var lines = [\"float M (in vec2 \" + vx + \", in float rho)\", \"{\",\n        \"    vec2 r = vec2 (length (\" + vx + \") + rho, 0.0);\",\n        \"    float a[\" + cs.length + \"];\",\n        \"    a[0] = length (\" + GLSL.glslComplex(a0a0.constant()) +\n        \");\"\n    ];\n    for (i = 0, l = leadRoots.length; i < l; i++)\n        lines.push(\"    a[0] *= distance (\" + vx + \", \" +\n            GLSL.glslComplex(leadRoots[i]) + \") - rho;\");\n    for (i = 1, l = cs.length; i < l; i++)\n        // FIXME: 'r' must not conflict with variables of polynomial p\n        lines.push(\"    a[\" + i + \"] = length (\" + GLSL.glslHorner('r',\n            GLSL.glslCoefficients(cs[i])) + \");\");\n    lines = lines.concat([\"    float m = a[1] / a[0];\",\n        \"    for (int j = 2; j < \" + cs.length + \"; j++) {\",\n        \"        m = max (m, pow (a[j] / a[0], 1.0 / float (j)));\",\n        \"    }\",\n        \"    return 2.0 * m;\", \"}\"\n    ]);\n    return lines.join(\"\\n\");\n};\n\n/**\n * @param {Polynomial} p\n * @param {string} vx\n * @param {string} vy\n * @return {string}\n */\nGLSL.glslRho = function(p, vx, vy) {\n    var an = p.leading(vy),\n        disc = p.discriminant(vy),\n        leadRoots = Polynomial.roots(an.coefficientList_()),\n        discRoots = Polynomial.roots(disc.coefficientList_()),\n        i, l, critical = [];\n    for (i = 0, l = leadRoots.length; i < l; i++)\n        if (isFinite(leadRoots[i].abs()))\n            critical.push(leadRoots[i]);\n    for (i = 0, l = discRoots.length; i < l; i++)\n        if (isFinite(discRoots[i].abs()))\n            critical.push(discRoots[i]);\n    var lines = [\"float rho (in vec2 \" + vx + \") {\",\n        \"    float d = 100.0;\"\n    ];\n    for (i = 0, l = critical.length; i < l; i++)\n        lines.push(\"    d = min (d, distance (\" + vx + \", \" +\n            GLSL.glslComplex(critical[i]) + \"));\");\n    lines = lines.concat([\"    return 0.999 * d;\", \"}\"]);\n    return lines.join(\"\\n\");\n};\n\n/** @type {number} */\nGLSL.N = 8;\n\n/**\n * @param {Array<string>} cs\n * @return {Array<string>}\n */\nGLSL.pad = function(cs) {\n    var n = GLSL.N - cs.length + 1;\n    var zero = GLSL.glslComplex(Complex.zero());\n    for (var i = 0; i < n; i++)\n        cs.push(zero);\n    return cs;\n};\n\n/**\n * @param {Polynomial} p\n * @return {string}\n */\nGLSL.polynomialShaderSource = function(p) {\n    var vars = p.variableList();\n    var vx = vars.length < 2 ? \"x\" : vars[0];\n    var vy = vars.length === 0 ? \"y\" : vars[vars.length - 1];\n    var sources = [\n        GLSL.glslHeader(p, vx, vy),\n        GLSL.glslF(p, vx, vy),\n        GLSL.glslFx(p, vx, vy),\n        GLSL.glslFy(p, vx, vy),\n        GLSL.glslRho(p, vx, vy),\n        GLSL.glslM(p, vx, vy)\n    ].join(\"\\n\\n\");\n    return sources;\n};\n","/**\n * @param {Array<Array<Polynomial>>} m\n * @constructor\n */\nfunction Matrix(m) {\n    this.values = m;\n}\n\n/**\n * Richard S. Bird\n * A simple division-free algorithm for computing determinants\n * @return {Polynomial}\n */\nMatrix.prototype.det = function() {\n    var as = this.values;\n    var n = as.length;\n    if (n === 0)\n        console.error('matrix must be non-empty');\n    for (var i = 0; i < n; i++)\n        if (as[i].length !== n)\n            console.error('matrix must be square');\n    var a = this;\n    for (var j = 1; j < n; j++)\n        a = Matrix.mul(Matrix.mu(a), this);\n    var d = a.values[0][0];\n    return n % 2 === 0 ? d.neg() : d;\n};\n\n/**\n * @param {Matrix} x\n * @return {Matrix}\n */\nMatrix.mu = function(x) {\n    var xs = x.values;\n    var zero = xs[0][0].zero();\n    var ms = [];\n    for (var i = 0, l = xs.length; i < l; i++) {\n        ms[i] = [];\n        for (var j = 0; j < l; j++) {\n            if (j < i) {\n                ms[i][j] = zero;\n            } else if (j === i) {\n                var sum = zero;\n                for (var k = j + 1; k < l; k++)\n                    sum = sum.add(xs[k][k].neg());\n                ms[i][j] = sum;\n            } else {\n                ms[i][j] = xs[i][j];\n            }\n        }\n    }\n    return new Matrix(ms);\n};\n\n/**\n * @param {Matrix} a\n * @param {Matrix} b\n * @return {Matrix}\n */\nMatrix.mul = function(a, b) {\n    var as = a.values,\n        bs = b.values;\n    if (as[0].length !== bs.length)\n        console.error('matrix dimensions must match');\n    var cs = [];\n    var rows = as.length,\n        cols = bs[0].length,\n        zero = as[0][0].zero();\n    for (var i = 0; i < rows; i++) {\n        cs[i] = [];\n        for (var j = 0; j < cols; j++) {\n            var sum = zero;\n            for (var k = 0, l = as[0].length; k < l; k++)\n                sum = sum.add(as[i][k].mul(bs[k][j]));\n            cs[i][j] = sum;\n        }\n    }\n    return new Matrix(cs);\n};\n\n/** @type {Array<Array<Polynomial>>} */\nMatrix.prototype.values = null;\n","/**\n * @constructor\n * @param {StateGL} stategl\n * @param {Surface} surface\n * @implements {Stage}\n */\nfunction Initial(stategl, surface) {\n    this.mkBuffers(stategl, surface, Mesh.tetrakis(2));\n    this.mkProgram(stategl, surface);\n}\n\n/** @type {WebGLBuffer} */\nInitial.prototype.indexBuffer = null;\n\n/**\n * @param {StateGL} stategl\n * @param {Surface} surface\n * @param {Array<number>} positions\n */\nInitial.prototype.mkBuffers = function(stategl, surface, positions) {\n    var gl = stategl.gl;\n    surface.numIndices = positions.length / 2;\n    gl.enableVertexAttribArray(0);\n    this.positionBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.positionBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(positions), gl.STATIC_DRAW);\n};\n\n/**\n * @param {StateGL} stategl\n * @param {Surface} surface\n */\nInitial.prototype.mkProgram = function(stategl, surface) {\n    var sources = [\n        StateGL.getShaderSource('Initial.vert'),\n        StateGL.getShaderSource('Dummy.frag')\n    ];\n    sources[0] = surface.withCustomAndCommon(sources[0]);\n    this.program = stategl.mkProgram(sources, [\"position\", \"delta\",\n        \"subdivisionFlag\", \"values\"\n    ]);\n};\n\n/** @type {WebGLBuffer} */\nInitial.prototype.positionBuffer = null;\n\n/** @type {WebGLProgram} */\nInitial.prototype.program = null;\n\n/**\n * @param {StateGL} stategl\n * @param {Surface} surface\n * @param {WebGLRenderingContext} gl\n */\nInitial.prototype.render = function(stategl, surface, gl) {\n    gl.useProgram(this.program);\n    var stride = 4 + 2 * GLSL.N;\n    var size = stride * surface.numIndices;\n    gl.enableVertexAttribArray(0);\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.positionBuffer);\n    gl.vertexAttribPointer(0, 2, gl.FLOAT, false, 0, 0);\n\n    TransformFeedback.withTransformFeedback(gl, surface, size, function() {\n        gl.drawArrays(gl.TRIANGLES, 0, surface.numIndices);\n    });\n\n    // store feedback values in textures\n    TransformFeedback.toTextures(gl, surface);\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\n};\n","var Mesh = {};\n\n/**\n * @param {number} n\n * @return {Array<number>}\n */\nMesh.tetrakis = function(n) {\n    var /** Array<number> */ mesh = [];\n    for (var x = -5 * n; x < 5 * n; x++) {\n        for (var y = -5 * n; y < 5 * n; y++) {\n            if ((x + y) % 2 === 0) {\n                mesh = mesh.concat(\n                    [x, y, x + 1, y, x, y + 1, x + 1, y, x + 1, y + 1, x, y + 1]\n                );\n            } else {\n                mesh = mesh.concat(\n                    [x, y, x + 1, y + 1, x, y + 1, x, y, x + 1, y, x + 1, y + 1]\n                );\n            }\n        }\n    }\n    return mesh.map(z => z / n);\n};\n","var Misc = {};\n\n/**\n * @param {number} x\n * @param {number} y\n * @param {number} mu\n * @return {number}\n */\nMisc.lerp = function(x, y, mu) {\n    return x + mu * (y - x);\n};\n\n/**\n * @param {Array<string>} files\n * @param {function(Array<string>)} onload\n */\nMisc.loadTextFiles = function(files, onload) {\n    var sources = [],\n        count = 0;\n    files.forEach(function(file, i, files) {\n        var req = new XMLHttpRequest();\n        req.open(\"GET\", file, true);\n        req.responseType = \"text\";\n        req.onload = function() {\n            sources[i] = req.responseText;\n            if (++count == files.length)\n                onload(sources);\n        };\n        req.send();\n    });\n};\n","/**\n * @param {!Object<string,number>} monomial\n * @constructor\n */\nfunction Monomial(monomial) {\n    this.value = monomial;\n}\n\n/**\n * @param {Monomial} m\n * @return {Monomial}\n */\nMonomial.clone = function(m) {\n    var monomial = {};\n    var ms = m.value;\n    for (var key in ms)\n        monomial[key] = ms[key];\n    return new Monomial(monomial);\n};\n\n/**\n * @param {Monomial} a\n * @param {Monomial} b\n * @return {boolean}\n */\nMonomial.is = function(a, b) {\n    var key;\n    for (key in a.value)\n        if (!b.value.hasOwnProperty(key) || a.value[key] !== b.value[key])\n            return false;\n    for (key in b.value)\n        if (!a.value.hasOwnProperty(key) || a.value[key] !== b.value[key])\n            return false;\n    return true;\n};\n","/**\n * @param {Complex} coefficient\n * @param {Monomial} monomial\n * @constructor\n */\nfunction Term(coefficient, monomial) {\n    this.coefficient = coefficient;\n    this.monomial = monomial;\n}\n\n/**\n * @param {Term} a\n * @param {Term} b\n * @return {Term}\n */\nTerm.add = function(a, b) {\n    if (!Monomial.is(a.monomial, b.monomial))\n        console.error('Monomials do not match');\n    return new Term(Complex.add(a.coefficient, b.coefficient), a.monomial);\n};\n\n/** @type {Complex} */\nTerm.prototype.coefficient = null;\n\n/** @type {Monomial} */\nTerm.prototype.monomial = null;\n\n/**\n * @param {Term} a\n * @param {Term} b\n * @return {Term}\n */\nTerm.mul = function(a, b) {\n    var monomial = {};\n    var oa = a.monomial.value,\n        ob = b.monomial.value,\n        key;\n    for (key in oa) {\n        monomial[key] = oa[key] + (ob[key] || 0);\n    }\n    for (key in ob) {\n        monomial[key] = ob[key] + (oa[key] || 0);\n    }\n    return new Term(Complex.mul(a.coefficient, b.coefficient),\n        new Monomial(monomial));\n};\n\n/**\n * @param {Term} a\n * @return {Term}\n */\nTerm.neg = function(a) {\n    return new Term(a.coefficient.neg(), a.monomial);\n};\n\n/**\n * @param {Array<Term>} terms\n * @return {Array<Term>}\n */\nTerm.reduce = function(terms) {\n    /**\n     * @param {Array<Term>} ps\n     * @param {Array<Term>} qs\n     * @return {Array<Term>}\n     */\n    function reduce_(ps, qs) {\n        if (qs.length === 0)\n            return ps;\n        else if (qs.length === 1) {\n            ps.push(qs[0]);\n            return ps;\n        } else {\n            var q = qs.pop();\n            var c = q.coefficient;\n            var m = q.monomial;\n            var otherTerms = [];\n            for (var i = 0, l = qs.length; i < l; i++) {\n                if (Monomial.is(m, qs[i].monomial))\n                    c = Complex.add(c, qs[i].coefficient);\n                else\n                    otherTerms.push(qs[i]);\n            }\n            ps.push(new Term(c, m));\n            return reduce_(ps, otherTerms);\n        }\n    }\n    return reduce_([], terms);\n};\n","/**\n * @param {number} w\n * @param {number} x\n * @param {number} y\n * @param {number} z\n * @constructor\n */\nfunction Quaternion(w, x, y, z) {\n    this.w = w;\n    this.x = x;\n    this.y = y;\n    this.z = z;\n}\n\n/** @return {number} */\nQuaternion.prototype.abs = function() {\n    var q = this;\n    return Math.sqrt(q.w * q.w + q.x * q.x + q.y * q.y + q.z * q.z);\n};\n\n/**\n * @param {number} lat\n * @param {number} long\n * @return {Quaternion}\n */\nQuaternion.fromLatLong = function(lat, long) {\n    var theta = -lat / 2,\n        phi = -long / 2,\n        a = new Quaternion(Math.cos(theta), Math.sin(theta), 0, 0),\n        b = new Quaternion(Math.cos(phi), 0, 0, Math.sin(phi));\n    return Quaternion.mul(a, b);\n};\n\n/**\n * @param {Quaternion} a\n * @param {Quaternion} b\n * @param {number} t\n * @return {Quaternion}\n */\nQuaternion.lerp = function(a, b, t) {\n    return new Quaternion(\n        Misc.lerp(a.w, b.w, t),\n        Misc.lerp(a.x, b.x, t),\n        Misc.lerp(a.y, b.y, t),\n        Misc.lerp(a.z, b.z, t)\n    );\n};\n\n/**\n * @param {Quaternion} a\n * @param {Quaternion} b\n * @return {Quaternion}\n */\nQuaternion.mul = function(a, b) {\n    return new Quaternion(\n        a.w * b.w - a.x * b.x - a.y * b.y - a.z * b.z,\n        a.w * b.x + a.x * b.w + a.y * b.z - a.z * b.y,\n        a.w * b.y - a.x * b.z + a.y * b.w + a.z * b.x,\n        a.w * b.z + a.x * b.y - a.y * b.x + a.z * b.w\n    );\n};\n\n/**\n * @param {Quaternion} a\n * @param {Quaternion} b\n * @param {number} t\n * @return {Quaternion}\n */\nQuaternion.nlerp = function(a, b, t) {\n    return Quaternion.lerp(a, b, t).normalize();\n};\n\n/** @return {Quaternion} */\nQuaternion.prototype.normalize = function() {\n    var q = this,\n        abs = q.abs();\n    return new Quaternion(q.w / abs, q.x / abs, q.y / abs, q.z / abs);\n};\n\n/**\n * rotation matrix from quaternion, in column-major order\n * @return {Array<number>}\n */\nQuaternion.prototype.rotationMatrix = function() {\n    var w = this.w,\n        x = this.x,\n        y = this.y,\n        z = this.z;\n    return [w * w + x * x - y * y - z * z, 2 * x * y + 2 * w * z, 2 * x * z -\n        2 * w * y, 0, 2 * x * y - 2 * w * z, w * w - x * x + y * y - z *\n        z, 2 * y * z + 2 * w * x, 0, 2 * x * z + 2 * w * y, 2 * y * z -\n        2 * w * x, w * w - x * x - y * y + z * z, 0, 0, 0, 0, w * w + x *\n        x + y * y + z * z\n    ];\n};\n\n/**\n * @param {Quaternion} a\n * @param {Quaternion} b\n * @return {Quaternion}\n */\nQuaternion.sub = function(a, b) {\n    return new Quaternion(a.w - b.w, a.x - b.x, a.y - b.y, a.z - b.z);\n};\n","/**\n * @constructor\n * @param {StateGL} stategl\n * @param {Surface} surface\n * @implements {Stage}\n */\nfunction Subdivision(stategl, surface) {\n    this.mkProgram(stategl, surface);\n}\n\n/**\n * @param {StateGL} stategl\n * @param {Surface} surface\n */\nSubdivision.prototype.mkProgram = function(stategl, surface) {\n    var sources = [\n        StateGL.getShaderSource('Subdivision.vert'),\n        StateGL.getShaderSource('Dummy.frag')\n    ];\n    sources[0] = surface.withCustomAndCommon(sources[0]);\n    this.program = stategl.mkProgram(sources, [\"position\", \"delta\",\n        \"subdivisionFlag\", \"values\"\n    ]);\n};\n\n/** @type {WebGLProgram} */\nSubdivision.prototype.program = null;\n\n/**\n * @param {StateGL} stategl\n * @param {Surface} surface\n * @param {WebGLRenderingContext} gl\n */\nSubdivision.prototype.render = function(stategl, surface, gl) {\n    var i, l;\n    var textures = surface.textures;\n    var program = this.program;\n    gl.useProgram(program);\n\n    // read subdivision flags from transform feedback buffer\n    var subdivisionFlags = new Float32Array(surface.numIndices);\n    var buf = TransformFeedback.toFloat32Array(gl, surface);\n    var stride = 4 + 2 * GLSL.N;\n    var size = stride * surface.numIndices;\n    for (i = 3, l = 0; i < size; i += stride, l++)\n        subdivisionFlags[l] = buf[i];\n\n    // prepare subdivision patterns and buffers\n    // subdivision patterns are given in barycentric coordinates\n    var subdivisionPattern = [\n        // 1st pattern (no subdivision)\n        1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 1.0,\n        // 2nd pattern (split 3rd edge)\n        1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.5, 0.0, 0.5,\n        0.0, 1.0, 0.0, 0.0, 0.0, 1.0, 0.5, 0.0, 0.5,\n        // 3rd pattern (split 2nd edge)\n        1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.5, 0.5,\n        0.0, 0.5, 0.5, 0.0, 0.0, 1.0, 1.0, 0.0, 0.0,\n        // 4th pattern (split 2nd and 3rd edge)\n        1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.5, 0.0, 0.5,\n        0.0, 0.5, 0.5, 0.0, 0.0, 1.0, 0.5, 0.0, 0.5,\n        0.5, 0.0, 0.5, 0.0, 1.0, 0.0, 0.0, 0.5, 0.5,\n        // 5th pattern (split 1st edge)\n        1.0, 0.0, 0.0, 0.5, 0.5, 0.0, 0.0, 0.0, 1.0,\n        0.0, 0.0, 1.0, 0.5, 0.5, 0.0, 0.0, 1.0, 0.0,\n        // 6th pattern (split 1st and 3rd edge)\n        1.0, 0.0, 0.0, 0.5, 0.5, 0.0, 0.5, 0.0, 0.5,\n        0.5, 0.0, 0.5, 0.5, 0.5, 0.0, 0.0, 0.0, 1.0,\n        0.0, 1.0, 0.0, 0.0, 0.0, 1.0, 0.5, 0.5, 0.0,\n        // 7th pattern (split 1st and 2nd edge)\n        1.0, 0.0, 0.0, 0.5, 0.5, 0.0, 0.0, 0.5, 0.5,\n        0.0, 0.0, 1.0, 1.0, 0.0, 0.0, 0.0, 0.5, 0.5,\n        0.0, 0.5, 0.5, 0.5, 0.5, 0.0, 0.0, 1.0, 0.0,\n        // 8th pattern (split all edges)\n        1.0, 0.0, 0.0, 0.5, 0.5, 0.0, 0.5, 0.0, 0.5,\n        0.5, 0.5, 0.0, 0.0, 1.0, 0.0, 0.0, 0.5, 0.5,\n        0.0, 0.5, 0.5, 0.0, 0.0, 1.0, 0.5, 0.0, 0.5,\n        0.5, 0.5, 0.0, 0.0, 0.5, 0.5, 0.5, 0.0, 0.5,\n        // 9th pattern (variation of 4th pattern)\n        1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.5, 0.5,\n        0.0, 0.5, 0.5, 0.5, 0.0, 0.5, 1.0, 0.0, 0.0,\n        0.5, 0.0, 0.5, 0.0, 0.5, 0.5, 0.0, 0.0, 1.0,\n        // 10th pattern (variation of 6th pattern)\n        1.0, 0.0, 0.0, 0.5, 0.5, 0.0, 0.5, 0.0, 0.5,\n        0.5, 0.0, 0.5, 0.5, 0.5, 0.0, 0.0, 1.0, 0.0,\n        0.0, 1.0, 0.0, 0.0, 0.0, 1.0, 0.5, 0.0, 0.5,\n        // 11th pattern (variation of 7th pattern)\n        1.0, 0.0, 0.0, 0.5, 0.5, 0.0, 0.0, 0.0, 1.0,\n        0.0, 0.0, 1.0, 0.5, 0.5, 0.0, 0.0, 0.5, 0.5,\n        0.0, 0.5, 0.5, 0.5, 0.5, 0.0, 0.0, 1.0, 0.0\n    ];\n    var subdivisionPatternFirst = [0, 3, 9, 15, 24, 30, 39, 48, 60, 69, 78];\n    var subdivisionPatternCount = [3, 6, 6, 9, 6, 9, 9, 12, 9, 9, 9];\n\n    // prepare input textures\n    var texIs = [];\n    for (i = 0, l = textures.length; i < l; i++) {\n        gl.activeTexture(gl.TEXTURE0 + i);\n        gl.bindTexture(gl.TEXTURE_2D, textures[i]);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        texIs[i] = i;\n    }\n    var samplersLocation = gl.getUniformLocation(program, 'samplers');\n    gl.uniform1iv(samplersLocation, texIs);\n\n    var offsetsIn = [];\n    var patterns = [];\n    var /** number */ primitivesWritten = 0;\n    // identify and prepare subdivision patterns\n    for (i = 0, l = surface.numIndices / 3; i < l; i++) {\n        var /** number */ patternIndex = subdivisionFlags[3 * i];\n        var /** number */ first = subdivisionPatternFirst[patternIndex];\n        var /** number */ numIndices = subdivisionPatternCount[patternIndex];\n        var pattern = subdivisionPattern.slice(3 * first,\n            3 * (first + numIndices));\n        patterns.push(pattern);\n        for (var j = 0; j < numIndices; j++)\n            offsetsIn.push(3 * i);\n        primitivesWritten += numIndices;\n    }\n    patterns = Array.prototype.concat.apply([], patterns);\n\n    size = stride * primitivesWritten;\n\n    var patternsBuffer = gl.createBuffer();\n    gl.enableVertexAttribArray(0);\n    gl.bindBuffer(gl.ARRAY_BUFFER, patternsBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(patterns), gl.STATIC_DRAW);\n    gl.vertexAttribPointer(0, 3, gl.FLOAT, false, 0, 0);\n\n    var offsetsInBuffer = gl.createBuffer();\n    gl.enableVertexAttribArray(1);\n    gl.bindBuffer(gl.ARRAY_BUFFER, offsetsInBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(offsetsIn), gl.STATIC_DRAW);\n    gl.vertexAttribPointer(1, 1, gl.FLOAT, false, 0, 0);\n\n    TransformFeedback.withTransformFeedback(gl, surface, size, function() {\n        gl.drawArrays(gl.TRIANGLES, 0, primitivesWritten);\n    });\n\n    surface.numIndices = primitivesWritten;\n\n    // store feedback values in textures\n    TransformFeedback.toTextures(gl, surface);\n\n    for (i = 0, l = textures.length + 1; i < l; i++) {\n        gl.activeTexture(gl.TEXTURE0 + i);\n        gl.bindTexture(gl.TEXTURE_2D, null);\n    }\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\n    gl.deleteBuffer(offsetsInBuffer);\n    gl.deleteBuffer(patternsBuffer);\n    gl.disableVertexAttribArray(1);\n};\n","/**\n * @constructor\n * @param {StateGL} stategl\n * @param {Surface} surface\n * @implements {Stage}\n */\nfunction SubdivisionPre(stategl, surface) {\n    this.mkProgram(stategl, surface);\n}\n\n/**\n * @param {StateGL} stategl\n * @param {Surface} surface\n */\nSubdivisionPre.prototype.mkProgram = function(stategl, surface) {\n    var sources = [\n        StateGL.getShaderSource('SubdivisionPre.vert'),\n        StateGL.getShaderSource('Dummy.frag')\n    ];\n    sources[0] = surface.withCustomAndCommon(sources[0]);\n    this.program = stategl.mkProgram(sources, [\"position\", \"delta\",\n        \"subdivisionFlag\", \"values\"\n    ]);\n};\n\n/** @type {WebGLProgram} */\nSubdivisionPre.prototype.program = null;\n\n/**\n * @param {StateGL} stategl\n * @param {Surface} surface\n * @param {WebGLRenderingContext} gl\n */\nSubdivisionPre.prototype.render = function(stategl, surface, gl) {\n    var textures = surface.textures;\n    var program = this.program;\n    gl.useProgram(program);\n    surface.fillIndexBuffer(stategl);\n    gl.vertexAttribPointer(0, 1, gl.FLOAT, false, 0, 0);\n    var stride = 4 + 2 * GLSL.N;\n    var size = stride * surface.numIndices;\n\n    // prepare input textures\n    var texIs = [];\n    for (var i = 0, l = textures.length; i < l; i++) {\n        gl.activeTexture(gl.TEXTURE0 + i);\n        gl.bindTexture(gl.TEXTURE_2D, textures[i]);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        texIs[i] = i;\n    }\n    var samplersLocation = gl.getUniformLocation(program, 'samplers');\n    gl.uniform1iv(samplersLocation, texIs);\n\n    TransformFeedback.withTransformFeedback(gl, surface, size, function() {\n        gl.drawArrays(gl.TRIANGLES, 0, surface.numIndices);\n    });\n\n    // store feedback values in textures\n    TransformFeedback.toTextures(gl, surface);\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\n};\n\n/** @type {number} */\nSubdivisionPre.prototype.size = 0;\n","/**\n * @constructor\n * @param {StateGL} stategl\n * @param {Polynomial} polynomial\n * @param {number} depth\n * @implements {Stage}\n */\nfunction Surface(stategl, polynomial, depth) {\n    var surface = this;\n    this.polynomial = polynomial;\n    this.depth = depth;\n    surface.sheets = polynomial.sheets();\n    // surface must be bivariate and at least quadratic\n    if (!polynomial.isBivariate()) {\n        console.log(\"Equation must be bivariate!\");\n        return;\n    }\n    if (surface.sheets < 2) {\n        console.log(\"There must be at least two sheets!\");\n        return;\n    }\n\n    var gl = stategl.gl;\n\n    this.indexBuffer = gl.createBuffer();\n    this.mkTextures(stategl);\n    this.mkTransformFeedback(stategl);\n\n    surface.commonShaderSrc = /** @type {string} */ (resources[\"Common.glsl\"]).trim();\n    surface.customShaderSrc = GLSL.polynomialShaderSource(polynomial);\n    surface.initial = new Initial(stategl, surface);\n    surface.initial.render(stategl, surface, gl);\n    surface.subdivisionPre = new SubdivisionPre(stategl, surface);\n    surface.subdivision = new Subdivision(stategl, surface);\n    for (var i = 0; i < surface.depth; i++) {\n        surface.subdivisionPre.render(stategl, surface, gl);\n        surface.subdivision.render(stategl, surface, gl);\n    }\n    surface.assembly = new Assembly(stategl, surface);\n    surface.assembly.render(stategl, surface, gl);\n    surface.mkProgram(stategl);\n    var canvas = gl.canvas;\n    gl.viewport(0, 0, canvas.width, canvas.height);\n}\n\n/** @type {string} */\nSurface.prototype.commonShaderSrc = \"\";\n\n/** @type {string} */\nSurface.prototype.customShaderSrc = \"\";\n\n/**\n * @param {StateGL} stategl\n * @param {boolean=} big\n * @return {Array<string>}\n */\nSurface.prototype.domainColouring = function(stategl, big = false) {\n    return Export.domainColouring(this.polynomial, stategl, big);\n};\n\n/**\n * @param {StateGL} stategl\n * @param {string=} name\n */\nSurface.prototype.exportBinary = function(stategl, name = \"surface.bin\") {\n    var url = TransformFeedback.toURL(stategl.gl, this, 4);\n    Export.download(name, url);\n};\n\n/**\n * @param {StateGL} stategl\n * @param {string} name\n * @param {boolean=} big\n */\nSurface.prototype.exportDomainColouring = function(stategl, name = \"sheet\", big = true) {\n    Export.exportDomainColouring(this.polynomial, stategl, name, big);\n};\n\n/**\n * @param {StateGL} stategl\n * @param {string=} name\n * @param {boolean=} big\n */\nSurface.prototype.exportSurface = function(stategl, name = \"surface\", big = true) {\n    var pixels = TransformFeedback.toFloat32Array(stategl.gl, this, 4);\n    Export.exportSurface(stategl, pixels, name, big);\n};\n\n/** @param {StateGL} stategl */\nSurface.prototype.fillIndexBuffer = function(stategl) {\n    var gl = stategl.gl;\n    var indices = [];\n    for (var i = 0; i < this.numIndices; i++)\n        indices[i] = i;\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.indexBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(indices), gl.STATIC_DRAW);\n};\n\n/** @type {WebGLBuffer} */\nSurface.prototype.indexBuffer = null;\n\n/** @param {StateGL} stategl */\nSurface.prototype.mkProgram = function(stategl) {\n    var sources = StateGL.getShaderSources(\"Surface\");\n    sources[1] = this.withCustomAndCommon(sources[1]);\n    this.program = stategl.mkProgram(sources);\n};\n\n/** @param {StateGL} stategl */\nSurface.prototype.mkTextures = function(stategl) {\n    var gl = stategl.gl,\n        textures = [];\n    for (var i = 0; i < 5; i++) {\n        textures[i] = gl.createTexture();\n        gl.bindTexture(gl.TEXTURE_2D, textures[i]);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl[\"RGBA16F\"], 2048, 2048, 0, gl.RGBA,\n            gl.FLOAT, null);\n    }\n    gl.bindTexture(gl.TEXTURE_2D, null);\n    this.textures = textures;\n};\n\n/**\n * @param {StateGL} stategl\n * @suppress {reportUnknownTypes}\n */\nSurface.prototype.mkTransformFeedback = function(stategl) {\n    var gl = stategl.gl;\n    this.transformFeedback = gl[\"createTransformFeedback\"]();\n    this.transformFeedbackBuffer = gl.createBuffer();\n};\n\n/** @type {number} */\nSurface.prototype.numIndices = 0;\n\n/** @type {WebGLProgram} */\nSurface.prototype.program = null;\n\n/**\n * @param {StateGL} stategl\n * @param {WebGLRenderingContext} gl\n * @param {State3D} state3d\n */\nSurface.prototype.render = function(stategl, gl, state3d) {\n    if (!this.program)\n        return;\n    gl.useProgram(this.program);\n    stategl.updateClipping();\n    stategl.updateModelViewProjectionMatrices(state3d);\n    stategl.updateTransparency();\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.transformFeedbackBuffer);\n    gl.vertexAttribPointer(0, 4, gl.FLOAT, false, 0, 0);\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n    gl.drawArrays(gl.TRIANGLES, 0, this.numIndices);\n    stategl.updateTransparency(false);\n};\n\n/** @type {number} */\nSurface.prototype.sheets = 0;\n\n/** @type {Array<WebGLTexture>} */\nSurface.prototype.textures = [];\n\n/** @type {WebGLBuffer} */\nSurface.prototype.transformFeedbackBuffer = null;\n\n/**\n * @param {string} src\n * @return {string}\n */\nSurface.prototype.withCustomAndCommon = function(src) {\n    return [\"#version 300 es\", this.customShaderSrc, this.commonShaderSrc, src].join(\"\\n\");\n};\n","var TransformFeedback = {};\n\n/**\n * @param {WebGLRenderingContext} gl\n * @param {Surface} surface\n * @param {number=} stride\n * @suppress {reportUnknownTypes}\n * @return {Float32Array}\n */\nTransformFeedback.toFloat32Array = function(gl, surface, stride = 4 + 2 * GLSL.N) {\n    var size = stride * surface.numIndices;\n    var output = new Float32Array(size);\n    gl[\"bindTransformFeedback\"](gl[\"TRANSFORM_FEEDBACK\"], surface.transformFeedback);\n    gl[\"bindBufferBase\"](gl[\"TRANSFORM_FEEDBACK_BUFFER\"], 0, surface.transformFeedbackBuffer);\n    gl[\"getBufferSubData\"](gl[\"TRANSFORM_FEEDBACK_BUFFER\"], 0, output);\n    gl[\"bindBufferBase\"](gl[\"TRANSFORM_FEEDBACK_BUFFER\"], 0, null);\n    gl[\"bindTransformFeedback\"](gl[\"TRANSFORM_FEEDBACK\"], null);\n    return output;\n};\n\n/**\n * @param {WebGLRenderingContext} gl\n * @param {Surface} surface\n * @param {number=} stride\n */\nTransformFeedback.toTextures = function(gl, surface, stride = 4 + 2 * GLSL.N) {\n    var textures = surface.textures;\n    var output = TransformFeedback.toFloat32Array(gl, surface, stride);\n    var texData = new Float32Array(4 * 2048 * 2048);\n    for (var i = 0; i <= GLSL.N / 2; i++) {\n        gl.bindTexture(gl.TEXTURE_2D, textures[i]);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        for (var l = 0; l < surface.numIndices; l++) {\n            for (var k = 0; k < 4; k++)\n                texData[4 * l + k] = output[stride * l + 4 * i + k];\n        }\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl[\"RGBA16F\"], 2048, 2048, 0, gl.RGBA,\n            gl.FLOAT, texData);\n    }\n};\n\n/**\n * @param {WebGLRenderingContext} gl\n * @param {Surface} surface\n * @param {number=} stride\n * @return {string}\n */\nTransformFeedback.toURL = function(gl, surface, stride = 4 + 2 * GLSL.N) {\n    var pixels = TransformFeedback.toFloat32Array(gl, surface, stride);\n    return Export.pixelsToObjectURL(pixels);\n};\n\n/**\n * @param {WebGLRenderingContext} gl\n * @param {Surface} surface\n * @param {number} size\n * @param {function()} action\n * @suppress {reportUnknownTypes}\n */\nTransformFeedback.withTransformFeedback = function(gl, surface, size, action) {\n    gl[\"bindTransformFeedback\"](gl[\"TRANSFORM_FEEDBACK\"], surface.transformFeedback);\n    gl[\"bindBufferBase\"](gl[\"TRANSFORM_FEEDBACK_BUFFER\"], 0, surface.transformFeedbackBuffer);\n    gl.bufferData(gl[\"TRANSFORM_FEEDBACK_BUFFER\"], size * Float32Array.BYTES_PER_ELEMENT, gl[\"STATIC_COPY\"]);\n    gl[\"beginTransformFeedback\"](gl.TRIANGLES);\n    action();\n    gl[\"endTransformFeedback\"]();\n    gl[\"bindBufferBase\"](gl[\"TRANSFORM_FEEDBACK_BUFFER\"], 0, null);\n    gl[\"bindTransformFeedback\"](gl[\"TRANSFORM_FEEDBACK\"], null);\n};\n","/**\n * @param {Array<Array<string>>} rules\n * @constructor\n */\nfunction Tokenizer(rules) {\n    this.rules = rules;\n}\n\n/**\n * @param {string} str\n * @return {!Array<{type : string, value : string}>}\n */\nTokenizer.prototype.tokenize = function(str) {\n    var rules = this.rules;\n    var rule = \"(?:\";\n    for (var i = 0, l = rules.length; i < l; i++)\n        rule += (i > 0 ? \"|(\" : \"(\") + rules[i][0] + \")\";\n    rule += \")\";\n    var regexp = new RegExp(rule, \"g\");\n    var tokens = [];\n    var result;\n    while ((result = regexp.exec(str)) !== null) {\n        var value = result[0];\n        var type = rules[result.slice(1).indexOf(value)][1];\n        var token = {\n            \"type\": type,\n            \"value\": value\n        };\n        tokens.push(token);\n    }\n    return tokens;\n};\n"]}